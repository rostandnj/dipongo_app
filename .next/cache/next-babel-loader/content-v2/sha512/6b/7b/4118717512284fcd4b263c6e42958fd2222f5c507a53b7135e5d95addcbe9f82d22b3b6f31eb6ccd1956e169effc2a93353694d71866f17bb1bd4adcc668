{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/macbookpro/Projects/web/dipongo_app/pages/replacement/index.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from \"axios\";\nimport { URL } from \"../../urlapi\";\nimport { Layout, Modal, Progress } from 'antd';\nimport chrono from '../../public/assets/chrono.png';\nimport Countdown from \"react-countdown\";\nimport boueevide from \"../../public/assets/nouvelle-bouee-vide.png\";\nimport boueeremplie from \"../../public/assets/nouvelle-bouee-remplie.png\";\nimport { Spin, message } from 'antd';\nimport { LoadingOutlined } from '@ant-design/icons';\nimport chronoRed from \"../../public/assets/chrono-rouge.png\";\nimport Draggable, { DraggableCore } from 'react-draggable';\nimport vistaplage from \"../../public/assets/vistaplage3.png\";\nimport etoile from \"../../public/assets/etoile.png\";\nimport { useAuth } from \"../../store\";\nimport { useRouter } from \"next/router\";\nimport EmptyData from \"../../components/EmptyData\";\nconst pathSecour = \"../../secour/\";\nconst areas = ['baigneurs', 'bouee', 'drapeau-droit', 'drapeau-gauche', 'helicoptere', 'jetski', 'jumelles', 'palmes', 'radio', 'voiture'];\n\nconst antIcon = /*#__PURE__*/_jsxDEV(LoadingOutlined, {\n  style: {\n    fontSize: 40,\n    color: '#1d893c',\n    marginTop: 30\n  },\n  spin: true\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 24,\n  columnNumber: 17\n}, this);\n\nexport default function Home() {\n  const {\n    session,\n    updateSession,\n    deleteSession\n  } = useAuth();\n  const router = useRouter();\n  const allImage = [{\n    name: 'groupe_de_baigneurs',\n    file: 'baigneurs.png',\n    key: \"1\"\n  }, {\n    name: 'bouee_tube',\n    file: 'bouee_tube.png',\n    key: \"2\"\n  }, {\n    name: 'drapeau_1',\n    file: 'drapeau_gauche.png',\n    key: \"3\"\n  }, {\n    name: 'drapeau_2',\n    file: 'drapeau_droite.png',\n    key: \"4\"\n  }, {\n    name: 'helicoptere',\n    file: 'helicoptere.png',\n    key: \"5\"\n  }, {\n    name: 'jetski',\n    file: 'jetski.png',\n    key: \"6\"\n  }, {\n    name: 'jumelles',\n    file: 'jumelles.png',\n    key: \"7\"\n  }, {\n    name: 'palmes',\n    file: 'palmes.png',\n    key: \"8\"\n  }, {\n    name: 'radio',\n    file: 'radio.png',\n    key: \"9\"\n  }, {\n    name: 'voiture_4_4',\n    file: 'voiture.png',\n    key: \"10\"\n  }];\n  const {\n    0: arrayImage,\n    1: setArrayImage\n  } = useState([]);\n  const {\n    0: isModalVisible,\n    1: setIsModalVisible\n  } = useState(false);\n  const {\n    0: question,\n    1: setQuestion\n  } = useState(null);\n  const {\n    0: position,\n    1: setPosition\n  } = useState(1);\n  const {\n    0: answers,\n    1: setAnswers\n  } = useState([]);\n  const {\n    0: dateNow,\n    1: setDateNow\n  } = useState(Date.parse(Date()) / 1000);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  const {\n    0: loadingResp,\n    1: setLoadingResp\n  } = useState(false);\n  const {\n    0: verif,\n    1: setVerif\n  } = useState(null);\n  const {\n    0: localSession,\n    1: setLocalSession\n  } = useState(null);\n  const {\n    0: isModalLockedToolVisible,\n    1: setIsModalLockedToolVisible\n  } = useState(false);\n  const {\n    0: slide1,\n    1: setSlide1\n  } = useState(\"\");\n  const {\n    0: slide2,\n    1: setSlide2\n  } = useState(\"\");\n  const {\n    0: slide3,\n    1: setSlide3\n  } = useState(\"\");\n  const {\n    0: slide4,\n    1: setSlide4\n  } = useState(\"\");\n  const {\n    0: onmove,\n    1: setOnmove\n  } = useState(false);\n  const {\n    0: carAxis,\n    1: setCarAxis\n  } = useState('both');\n  const {\n    0: isModalChrono,\n    1: setIsModalChrono\n  } = useState(false);\n  const {\n    0: isModalEndStep,\n    1: setIsModalEndStep\n  } = useState(false);\n  const {\n    0: closeOnEndStep,\n    1: setCloseOnEndStep\n  } = useState(false);\n  const {\n    0: mousePosition,\n    1: setMousePosition\n  } = useState({\n    x: 0,\n    y: 0\n  });\n  const {\n    0: index,\n    1: setIndex\n  } = useState(null);\n  const {\n    0: positionSlide,\n    1: setPositionSlide\n  } = useState([{\n    x: 0,\n    y: 0\n  }, {\n    x: 0,\n    y: 0\n  }, {\n    x: 0,\n    y: 0\n  }, {\n    x: 0,\n    y: 0\n  }]);\n  const {\n    0: isMounted,\n    1: setIsMounted\n  } = useState(false);\n  useEffect(() => {\n    setIsMounted(true);\n  }, []);\n\n  const isDisplayable = tag => {\n    let test = false;\n    areas.forEach(el => {\n      if (el === tag) {\n        test = true;\n      }\n    });\n    return test;\n  };\n\n  const handleCancel = () => {\n    setIsModalVisible(false);\n    setIsModalChrono(false);\n    setIsModalEndStep(false);\n\n    if (localSession !== null) {\n      updateSession({\n        running_session: localSession\n      });\n      setCloseOnEndStep(!closeOnEndStep);\n    }\n  };\n\n  const handleCancelChrono = () => {\n    setIsModalVisible(false);\n    setIsModalChrono(false);\n    setIsModalEndStep(false);\n    setCloseOnEndStep(false);\n  };\n\n  const handleCancel2 = () => {\n    setIsModalLockedToolVisible(false);\n  };\n\n  useEffect(() => {\n    if (false) {\n      document.body.style.background = '#eaac3d';\n      setLoading(true);\n      const token = localStorage.getItem(\"token\");\n      axios.get(URL + '/api/user/info', {\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      }).then(result => {\n        setLoading(false);\n        updateSession(result.data.data);\n\n        if (isMounted) {\n          setLocalSession(result.data.data.running_session);\n        }\n\n        let tab = [];\n        result.data.data.running_session.session_steps[3].session_step_backgrounds[0].tool_session_answers.forEach(el => {\n          if (el.is_true !== true) {\n            allImage.forEach(im => {\n              if (im.name === el.tool.name) {\n                tab.push({\n                  name: el.tool.name,\n                  file: im.file\n                });\n              }\n            });\n          }\n        });\n\n        if (tab.length >= 4) {\n          setSlide1(tab[0].file);\n          setSlide2(tab[1].file);\n          setSlide3(tab[2].file);\n          setSlide4(tab[3].file);\n        } else {\n          if (tab.length === 3) {\n            setSlide1(tab[0].file);\n            setSlide2(tab[1].file);\n            setSlide3(tab[2].file);\n            setSlide4(\"\");\n          }\n\n          if (tab.length === 2) {\n            setSlide1(tab[0].file);\n            setSlide2(tab[1].file);\n            setSlide3(\"\");\n            setSlide4(\"\");\n          }\n\n          if (tab.length === 1) {\n            setSlide1(tab[0].file);\n            setSlide2(\"\");\n            setSlide3(\"\");\n            setSlide4(\"\");\n          }\n\n          if (tab.length === 0) {\n            setSlide1(\"\");\n            setSlide2(\"\");\n            setSlide3(\"\");\n            setSlide4(\"\");\n          }\n        }\n\n        setArrayImage(tab);\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n  }, []);\n\n  const Completionist = () => /*#__PURE__*/_jsxDEV(\"span\", {\n    children: \"00:00\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 171,\n    columnNumber: 33\n  }, this);\n\n  const renderer = ({\n    minutes,\n    seconds,\n    completed\n  }) => {\n    if (completed) {\n      router.push('/lost').then(r => {}); // Render a complete state\n\n      return null;\n    } else {\n      // Render a countdown\n      if (minutes === 25 && seconds === 59) {\n        setIsModalVisible(false);\n        setIsModalLockedToolVisible(false);\n        setIsModalEndStep(false);\n        setIsModalChrono(true);\n      }\n\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [minutes < 10 ? '0' : '', \" \", minutes, \":\", seconds < 10 ? '0' : '', seconds]\n      }, void 0, true);\n    }\n  };\n\n  const rendererUnlock = ({\n    minutes,\n    seconds,\n    completed\n  }) => {\n    if (completed) {\n      setIsModalLockedToolVisible(false);\n      displayQuestion(question.tool.name);\n      return null;\n    } else {\n      // Render a countdown\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: ['00', \":\", seconds]\n      }, void 0, true);\n    }\n  }; // display question\n\n\n  const displayQuestion = (e, data, index) => {\n    if (session.session !== undefined && session.session !== null) {\n      let tabItem = arrayImage[index];\n      let tag = undefined;\n\n      if (tabItem !== undefined) {\n        tag = tabItem.name;\n\n        if (tag !== undefined) {\n          let question = session.session.session_steps[3].session_step_backgrounds[0].tool_session_answers.filter(question => question.tool.name == tag)[0];\n\n          if (question !== undefined) {\n            setQuestion(question);\n\n            if (question.is_true !== true) {\n              if (question.next_time > Date.parse(Date()) / 1000) {} else {\n                setOnmove(true); //setIsModalVisible(true)\n\n                setIndex(index);\n              }\n            } else {\n              setOnmove(true);\n              setIndex(index);\n            }\n            /**/\n\n          }\n        }\n      }\n    }\n  };\n\n  const goodAnswer = id => {\n    if (session.session !== undefined && session.session !== null) {\n      if (parseInt(id, 10) <= session.session.session_steps[2].question_true) {\n        return \"../../bouee-remplie.png\";\n      } else {\n        return \"../../bouee-vide.png\";\n      }\n    } else {\n      return \"../../bouee-vide.png\";\n    } //return \"../../bouee-vide.png\"\n\n  };\n\n  const zoneIsVisible = tag => {\n    if (session.session !== undefined && session.session !== null) {\n      let question = session.session.session_steps[3].session_step_backgrounds[0].tool_session_answers.filter(question => question.tool.name == tag)[0];\n\n      if (question !== undefined) {\n        if (question.is_true !== true) {\n          return \"0\";\n        } else {\n          return \"1\";\n        }\n      } else {\n        return \"0\";\n      }\n    } else {\n      return \"0\";\n    }\n  };\n\n  const zoneIsVisibleOnHover = tag => {\n    if (session.session !== undefined && session.session !== null) {\n      let question = session.session.session_steps[3].session_step_backgrounds[0].tool_session_answers.filter(question => question.tool.name == tag)[0];\n\n      if (question !== undefined) {\n        if (question.is_true !== true) {\n          return true;\n        } else {\n          return false;\n        }\n      }\n\n      return false;\n    }\n\n    return false;\n  };\n\n  const slideUp = () => {\n    if (arrayImage.length >= 4) {\n      arrayImage.push(arrayImage.shift());\n      setSlide1(arrayImage[0].file);\n      setSlide2(arrayImage[1].file);\n      setSlide3(arrayImage[2].file);\n      setSlide4(arrayImage[3].file);\n    }\n  };\n\n  const slideDown = () => {\n    if (arrayImage.length >= 4) {\n      arrayImage.unshift(arrayImage.pop());\n      setSlide1(arrayImage[0].file);\n      setSlide2(arrayImage[1].file);\n      setSlide3(arrayImage[2].file);\n      setSlide4(arrayImage[3].file);\n    }\n  };\n\n  const onMouseMove = e => {\n    if (false) {\n      /* if(onmove && index!== null){\n           console.log({x:e.pageX,y:e.pageY})\n           //console.log(document.getElementById('prefix__rect4014').getBoundingClientRect())\n           console.log(document.getElementById('prefix__rect1514').getBoundingClientRect())\n           console.log(document.getElementById('box1').getBoundingClientRect())\n             setMousePosition({x:e.pageX,y:e.pageY})\n           let pos  = positionSlide;\n           pos[index]={\n               x: e.pageX/10  ,\n               y: e.pageY - (document.getElementById('prefix__rect1514').getBoundingClientRect().y + (document.getElementById('prefix__rect1514').getBoundingClientRect().height*0.5))}\n           setPositionSlide(pos)\n         }*/\n    }\n  };\n\n  async function makeResponse(id, answer) {\n    if (false) {\n      const token = localStorage.getItem(\"token\");\n      setLoadingResp(true);\n      axios.post(URL + '/api/answer/question', {\n        id,\n        answer\n      }, {\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      }).then(result => {\n        setLoadingResp(false);\n        setVerif(result.data.data.answer.is_true);\n        setLoadingResp(false);\n\n        if (result.data.data.running_session !== undefined) {\n          let test = session.session.session_steps[3].question_true === 9 && result.data.data.running_session.session_steps[3].question_true === 10;\n\n          if (test === false) {\n            updateSession(result.data.data);\n          } else {\n            if (result.data.data.running_session.question_done === 50) {\n              updateSession({\n                running_session: localSession\n              });\n              router.push('/win').then(r => {});\n            } else {\n              setLocalSession(result.data.data.running_session);\n\n              if (!closeOnEndStep) {\n                setIsModalEndStep(true);\n                setCloseOnEndStep(!closeOnEndStep);\n              } else {\n                setIsModalEndStep(false);\n                updateSession({\n                  running_session: localSession\n                });\n              }\n            }\n          }\n\n          let tab = [];\n          result.data.data.running_session.session_steps[3].session_step_backgrounds[0].tool_session_answers.forEach(el => {\n            if (el.is_true !== true) {\n              allImage.forEach(im => {\n                if (im.name === el.tool.name) {\n                  tab.push({\n                    name: el.tool.name,\n                    file: im.file\n                  });\n                }\n              });\n            }\n          });\n\n          if (tab.length >= 4) {\n            setSlide1(tab[0].file);\n            setSlide2(tab[1].file);\n            setSlide3(tab[2].file);\n            setSlide4(tab[3].file);\n          } else {\n            if (tab.length === 3) {\n              setSlide1(tab[0].file);\n              setSlide2(tab[1].file);\n              setSlide3(tab[2].file);\n              setSlide4(\"\");\n            }\n\n            if (tab.length === 2) {\n              setSlide1(tab[0].file);\n              setSlide2(tab[1].file);\n              setSlide3(\"\");\n              setSlide4(\"\");\n            }\n\n            if (tab.length === 1) {\n              setSlide1(tab[0].file);\n              setSlide2(\"\");\n              setSlide3(\"\");\n              setSlide4(\"\");\n            }\n\n            if (tab.length === 0) {\n              setSlide1(\"\");\n              setSlide2(\"\");\n              setSlide3(\"\");\n              setSlide4(\"\");\n            }\n          }\n\n          setArrayImage(tab);\n        }\n      }).catch(function (error) {\n        setLoadingResp(false);\n\n        if (error.response) {\n          //setLoading(false)\n          message.warning(error.response.data.message); // The request was made and the server responded with a status code\n          // that falls out of the range of 2xx\n\n          if (error.response.data.data !== undefined && error.response.data.data.code !== undefined && error.response.data.data.code !== null) {\n            switch (error.response.data.data.code) {\n              case 'no_running_session':\n                setIsModalVisible(false);\n                updateSession({\n                  running_session: null\n                });\n                break;\n\n              case 'session_ended':\n                updateSession(error.response.data.data);\n\n                if (error.response.data.data.running_session.question_done < error.response.data.data.running_session.question_total) {\n                  router.push('/lost').then(r => {});\n                } else {\n                  router.push('/win').then(r => {});\n                }\n\n                break;\n\n              case 'question_already_done':\n                if (session.session.question_done === 50) {\n                  router.push('/win').then(r => {});\n                } else {\n                  if (false) {\n                    window.location.reload();\n                  }\n                }\n\n                break;\n\n              case 'remaining_time':\n                break;\n\n              default:\n                break;\n            }\n          }\n        } else if (error.request) {\n          console.log(error.request);\n        } else {\n          console.log('Error', error.message);\n        }\n      });\n    }\n  }\n\n  const stopDrag = (e, data) => {\n    setTimeout(() => {\n      if (!loadingResp) {\n        setOnmove(false);\n        setCarAxis('both');\n        setPositionSlide([{\n          x: 0,\n          y: 0\n        }, {\n          x: 0,\n          y: 0\n        }, {\n          x: 0,\n          y: 0\n        }, {\n          x: 0,\n          y: 0\n        }]);\n      }\n    }, 0); //console.log(question);\n    // console.log(e);\n    //console.log(data);\n  };\n\n  const updatePosition = (e, ui, index) => {\n    let pos = [{\n      x: 0,\n      y: 0\n    }, {\n      x: 0,\n      y: 0\n    }, {\n      x: 0,\n      y: 0\n    }, {\n      x: 0,\n      y: 0\n    }];\n    pos[index] = {\n      x: positionSlide[index].x + ui.deltaX,\n      y: positionSlide[index].y + ui.deltaY\n    };\n    setPositionSlide(pos);\n  };\n\n  const ToolOverUp = (e, tag) => {\n    if (question !== null) {\n      setLoadingResp(true);\n      makeResponse(question.id, tag);\n      console.log(question.id);\n    }\n  };\n\n  if (session && session.session) {\n    var _session$session, _session$session2, _session$session3, _session$session3$ses, _session$session4;\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '100vw',\n          height: '100vh',\n          background: 'rgb(244 203 110)'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Modal, {\n          closable: false,\n          footer: null,\n          visible: isModalChrono,\n          onCancel: handleCancelChrono,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"  flex itemcenter justcenter column\",\n            style: {\n              height: '80vh'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w100 flex column itemcenter justcenter cursor\",\n              onClick: handleCancel,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  backgroundImage: `url(${chrono})`,\n                  backgroundSize: 'cover',\n                  width: '209px',\n                  height: '251px'\n                },\n                className: \"flex itemcenter justcenter\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    marginTop: 45,\n                    fontSize: 35\n                  },\n                  children: /*#__PURE__*/_jsxDEV(Countdown, {\n                    date: dateNow * 1000 + (((_session$session = session.session) === null || _session$session === void 0 ? void 0 : _session$session.should_end_date) - dateNow) * 1000,\n                    renderer: renderer\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 568,\n                    columnNumber: 1\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 567,\n                  columnNumber: 1\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 566,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-auth hauto w50 bgwhite u-mar-top-l u-pad-s \",\n                children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                  style: {\n                    fontSize: '18px'\n                  },\n                  className: \"center\",\n                  children: [\"Il te reste\", /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      fontSize: 18,\n                      marginRight: 5\n                    },\n                    children: /*#__PURE__*/_jsxDEV(Countdown, {\n                      date: dateNow * 1000 + (((_session$session2 = session.session) === null || _session$session2 === void 0 ? void 0 : _session$session2.should_end_date) - dateNow) * 1000,\n                      renderer: renderer\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 579,\n                      columnNumber: 1\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 578,\n                    columnNumber: 41\n                  }, this), \"minutes pour trouver toutes les bou\\xE9es\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 576,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 574,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 564,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 560,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 559,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Modal, {\n          closable: false,\n          footer: null,\n          visible: isModalEndStep,\n          onCancel: handleCancel,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"login-form card-auth hauto column  w100 bgwhite  rel flex u-pad-m rad8\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w100 flex column itemcenter justcenter flex\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: vistaplage,\n                className: \"w60\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"green fs18 center\",\n                children: \"BRAVO\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 613,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"fs20 center\",\n                children: [\" Tu as r\\xE9pondu juste \\xE0 toutes les questions \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 620,\n                  columnNumber: 108\n                }, this), \"dans \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    fontWeight: 'bold'\n                  },\n                  children: (_session$session3 = session.session) === null || _session$session3 === void 0 ? void 0 : (_session$session3$ses = _session$session3.session_steps[3]) === null || _session$session3$ses === void 0 ? void 0 : _session$session3$ses.step.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 622,\n                  columnNumber: 6\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 620,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 605,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: etoile,\n              className: \"starwin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 630,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 603,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 600,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n          onMouseMove: e => onMouseMove(e),\n          width: \"100%\",\n          height: \"100%\",\n          viewBox: \"0 0 320 270.93\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n          children: [/*#__PURE__*/_jsxDEV(\"defs\", {\n            id: \"prefix__defs2722\",\n            children: /*#__PURE__*/_jsxDEV(\"style\", {\n              id: \"style2786\",\n              children: \".prefix__cls-2{fill:#dcefec}.prefix__cls-3{fill:#a7d6d3}.prefix__cls-4{fill:#6db3b1}.prefix__cls-5{fill:#fff}.prefix__cls-8{fill:#eaac3d}.prefix__cls-110,.prefix__cls-111,.prefix__cls-113,.prefix__cls-14,.prefix__cls-15,.prefix__cls-25,.prefix__cls-42,.prefix__cls-43,.prefix__cls-49,.prefix__cls-9{fill:none}.prefix__cls-9{stroke:#eaac3d;stroke-width:6.08px}.prefix__cls-110,.prefix__cls-111,.prefix__cls-113,.prefix__cls-133,.prefix__cls-15,.prefix__cls-25,.prefix__cls-42,.prefix__cls-43,.prefix__cls-49,.prefix__cls-9{stroke-miterlimit:10}.prefix__cls-10,.prefix__cls-11{fill:#c08354}.prefix__cls-11,.prefix__cls-116,.prefix__cls-24,.prefix__cls-95{mix-blend-mode:multiply}.prefix__cls-12{fill:#444}.prefix__cls-13{fill:#707070}.prefix__cls-14{stroke:#707070;stroke-width:4.55px}.prefix__cls-14,.prefix__cls-25,.prefix__cls-42{stroke-linecap:round}.prefix__cls-14{stroke-linejoin:round}.prefix__cls-15{stroke:#fff;stroke-width:4.56px}.prefix__cls-17{fill:#771a10}.prefix__cls-18{fill:#c13e29}.prefix__cls-19{fill:#5580d7}.prefix__cls-22{fill:#b56938}.prefix__cls-23,.prefix__cls-24{fill:#4f63ac}.prefix__cls-25{stroke:#1c1c1c;stroke-width:4.81px}.prefix__cls-26{fill:#1c1c1c}.prefix__cls-27{fill:#262626}.prefix__cls-28{fill:#3c3c3b}.prefix__cls-29{fill:#1e1e1e}.prefix__cls-30{fill:#ffda3e}.prefix__cls-31{fill:#efc825}.prefix__cls-33{fill:#424242}.prefix__cls-34{fill:#2b2b2b;opacity:.24}.prefix__cls-35{fill:#161616}.prefix__cls-36{fill:#727272}.prefix__cls-37{fill:#f4ebdd}.prefix__cls-38{fill:#7c7c7c}.prefix__cls-39{fill:#2d2d2d}.prefix__cls-41{fill:#7f7f7f}.prefix__cls-42{stroke:#ffec9c;stroke-width:3.84px}.prefix__cls-43{stroke:#4c4c4c;stroke-width:3.2px;opacity:.26}.prefix__cls-45{fill:#595959}.prefix__cls-46{fill:#971506}.prefix__cls-49{stroke-width:2.32px;stroke:#292527}.prefix__cls-58{fill:#353535}.prefix__cls-64{fill:#eaac2c}.prefix__cls-65{fill:#fdd835}.prefix__cls-68{fill:#c23d20}.prefix__cls-71{fill:#68625e}.prefix__cls-72{fill:#514c48}.prefix__cls-73{fill:#ddd5ce}.prefix__cls-75{fill:#f4d47d}.prefix__cls-76{fill:#eab853}.prefix__cls-77{fill:#3a3532}.prefix__cls-78{fill:#726b68}.prefix__cls-79{fill:#ce9130}.prefix__cls-83{fill:#f4e3bd}.prefix__cls-84{fill:#efc76c}.prefix__cls-91{fill:#bfb8b4}.prefix__cls-96{fill:#e7d2bb}.prefix__cls-95{fill:#f3cb6f}.prefix__cls-101{fill:#577cbc}.prefix__cls-103{fill:#666}.prefix__cls-104{fill:#ffd800}.prefix__cls-105{fill:#ffe97d}.prefix__cls-106{fill:#060606}.prefix__cls-107{fill:#232323}.prefix__cls-109{fill:#717171}.prefix__cls-110,.prefix__cls-111{stroke:#444}.prefix__cls-110{stroke-width:1.66px}.prefix__cls-111{stroke-width:2.07px}.prefix__cls-112,.prefix__cls-116{fill:#b2b2b2}.prefix__cls-113{stroke:#3c3c3b;stroke-width:.45px}.prefix__cls-114{fill:#ebd483}.prefix__cls-115,.prefix__cls-126{fill:#dad4ce}.prefix__cls-118{fill:#4a58ab}.prefix__cls-119{fill:#343d77}.prefix__cls-120{fill:#908c86}.prefix__cls-121,.prefix__cls-130{fill:#f6f6f6}.prefix__cls-121{opacity:.7}.prefix__cls-122{fill:#706f6f}.prefix__cls-123{fill:#1d1d1b}.prefix__cls-125{fill:#504d4a}.prefix__cls-126,.prefix__cls-127{opacity:.5}.prefix__cls-129{fill:#a7402d}.prefix__cls-133{fill:#cb8e53;stroke:#925f36;stroke-width:1.42px}\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 651,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 650,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"defs\", {\n            children: /*#__PURE__*/_jsxDEV(\"pattern\", {\n              id: \"timer\",\n              width: \"1\",\n              height: \"2\",\n              children: [\"                             \", /*#__PURE__*/_jsxDEV(\"text\", {\n                x: 20,\n                y: 6,\n                fontSize: \"5\",\n                children: /*#__PURE__*/_jsxDEV(Countdown, {\n                  date: dateNow * 1000 + (((_session$session4 = session.session) === null || _session$session4 === void 0 ? void 0 : _session$session4.should_end_date) - dateNow) * 1000,\n                  renderer: renderer\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 665,\n                  columnNumber: 59\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 664,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 659,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 658,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"defs\", {\n            children: /*#__PURE__*/_jsxDEV(\"pattern\", {\n              id: \"spin\",\n              width: \"5\",\n              height: \"10\",\n              children: [\"                             \", /*#__PURE__*/_jsxDEV(\"text\", {\n                x: 5,\n                y: 9,\n                fontSize: \"10\",\n                style: {\n                  strokeWidth: '0.5',\n                  stroke: 'white'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 674,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 669,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 668,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 639,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 557,\n        columnNumber: 17\n      }, this)\n    }, void 0, false);\n  } else {\n    return /*#__PURE__*/_jsxDEV(EmptyData, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 701,\n      columnNumber: 16\n    }, this);\n  }\n}","map":{"version":3,"sources":["/Users/macbookpro/Projects/web/dipongo_app/pages/replacement/index.js"],"names":["React","useState","useEffect","axios","URL","Layout","Modal","Progress","chrono","Countdown","boueevide","boueeremplie","Spin","message","LoadingOutlined","chronoRed","Draggable","DraggableCore","vistaplage","etoile","useAuth","useRouter","EmptyData","pathSecour","areas","antIcon","fontSize","color","marginTop","Home","session","updateSession","deleteSession","router","allImage","name","file","key","arrayImage","setArrayImage","isModalVisible","setIsModalVisible","question","setQuestion","position","setPosition","answers","setAnswers","dateNow","setDateNow","Date","parse","loading","setLoading","loadingResp","setLoadingResp","verif","setVerif","localSession","setLocalSession","isModalLockedToolVisible","setIsModalLockedToolVisible","slide1","setSlide1","slide2","setSlide2","slide3","setSlide3","slide4","setSlide4","onmove","setOnmove","carAxis","setCarAxis","isModalChrono","setIsModalChrono","isModalEndStep","setIsModalEndStep","closeOnEndStep","setCloseOnEndStep","mousePosition","setMousePosition","x","y","index","setIndex","positionSlide","setPositionSlide","isMounted","setIsMounted","isDisplayable","tag","test","forEach","el","handleCancel","running_session","handleCancelChrono","handleCancel2","document","body","style","background","token","localStorage","getItem","get","headers","then","result","data","tab","session_steps","session_step_backgrounds","tool_session_answers","is_true","im","tool","push","length","catch","error","console","log","Completionist","renderer","minutes","seconds","completed","r","rendererUnlock","displayQuestion","e","undefined","tabItem","filter","next_time","goodAnswer","id","parseInt","question_true","zoneIsVisible","zoneIsVisibleOnHover","slideUp","shift","slideDown","unshift","pop","onMouseMove","makeResponse","answer","post","question_done","response","warning","code","question_total","window","location","reload","request","stopDrag","setTimeout","updatePosition","ui","pos","deltaX","deltaY","ToolOverUp","width","height","backgroundImage","backgroundSize","should_end_date","marginRight","fontWeight","step","strokeWidth","stroke"],"mappings":";;;AAAA,OAAOA,KAAP,IAAcC,QAAd,EAAuBC,SAAvB,QAAuC,OAAvC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,GAAR,QAAkB,cAAlB;AACA,SAAQC,MAAR,EAAeC,KAAf,EAAqBC,QAArB,QAAoC,MAApC;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AACA,OAAOC,SAAP,MAAsB,6CAAtB;AACA,OAAOC,YAAP,MAAyB,gDAAzB;AACA,SAASC,IAAT,EAAcC,OAAd,QAA6B,MAA7B;AACA,SAASC,eAAT,QAAgC,mBAAhC;AACA,OAAOC,SAAP,MAAsB,sCAAtB;AACA,OAAOC,SAAP,IAAmBC,aAAnB,QAAuC,iBAAvC;AACA,OAAOC,UAAP,MAAuB,qCAAvB;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAAQC,SAAR,QAAwB,aAAxB;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AAEA,MAAMC,UAAU,GAAG,eAAnB;AACA,MAAMC,KAAK,GAAG,CAAC,WAAD,EAAa,OAAb,EAAqB,eAArB,EACV,gBADU,EACO,aADP,EACqB,QADrB,EAC8B,UAD9B,EAEV,QAFU,EAED,OAFC,EAEO,SAFP,CAAd;;AAIA,MAAMC,OAAO,gBAAG,QAAC,eAAD;AAAiB,EAAA,KAAK,EAAE;AAAEC,IAAAA,QAAQ,EAAE,EAAZ;AAAeC,IAAAA,KAAK,EAAC,SAArB;AAA+BC,IAAAA,SAAS,EAAC;AAAzC,GAAxB;AAAuE,EAAA,IAAI;AAA3E;AAAA;AAAA;AAAA;AAAA,QAAhB;;AACA,eAAe,SAAUC,IAAV,GAAkB;AAE7B,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA,aAAX;AAA0BC,IAAAA;AAA1B,MAA4CZ,OAAO,EAAzD;AACA,QAAMa,MAAM,GAAGZ,SAAS,EAAxB;AACA,QAAMa,QAAQ,GAAG,CACb;AAACC,IAAAA,IAAI,EAAE,qBAAP;AAA8BC,IAAAA,IAAI,EAAC,eAAnC;AAAoDC,IAAAA,GAAG,EAAE;AAAzD,GADa,EAEb;AAACF,IAAAA,IAAI,EAAE,YAAP;AAAoBC,IAAAA,IAAI,EAAE,gBAA1B;AAA4CC,IAAAA,GAAG,EAAE;AAAjD,GAFa,EAGb;AAACF,IAAAA,IAAI,EAAE,WAAP;AAAmBC,IAAAA,IAAI,EAAE,oBAAzB;AAA+CC,IAAAA,GAAG,EAAE;AAApD,GAHa,EAIb;AAACF,IAAAA,IAAI,EAAE,WAAP;AAAmBC,IAAAA,IAAI,EAAE,oBAAzB;AAA+CC,IAAAA,GAAG,EAAE;AAApD,GAJa,EAKb;AAACF,IAAAA,IAAI,EAAE,aAAP;AAAqBC,IAAAA,IAAI,EAAE,iBAA3B;AAA8CC,IAAAA,GAAG,EAAE;AAAnD,GALa,EAMb;AAACF,IAAAA,IAAI,EAAE,QAAP;AAAgBC,IAAAA,IAAI,EAAE,YAAtB;AAAoCC,IAAAA,GAAG,EAAE;AAAzC,GANa,EAOb;AAACF,IAAAA,IAAI,EAAE,UAAP;AAAkBC,IAAAA,IAAI,EAAE,cAAxB;AAAwCC,IAAAA,GAAG,EAAE;AAA7C,GAPa,EAQb;AAACF,IAAAA,IAAI,EAAE,QAAP;AAAgBC,IAAAA,IAAI,EAAE,YAAtB;AAAoCC,IAAAA,GAAG,EAAE;AAAzC,GARa,EASb;AAACF,IAAAA,IAAI,EAAE,OAAP;AAAeC,IAAAA,IAAI,EAAE,WAArB;AAAkCC,IAAAA,GAAG,EAAE;AAAvC,GATa,EAUb;AAACF,IAAAA,IAAI,EAAE,aAAP;AAAqBC,IAAAA,IAAI,EAAE,aAA3B;AAA0CC,IAAAA,GAAG,EAAE;AAA/C,GAVa,CAAjB;AAWA,QAAM;AAAA,OAACC,UAAD;AAAA,OAAaC;AAAb,MAA8BtC,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM;AAAA,OAACuC,cAAD;AAAA,OAAiBC;AAAjB,MAAsCxC,QAAQ,CAAC,KAAD,CAApD;AACA,QAAM;AAAA,OAACyC,QAAD;AAAA,OAAWC;AAAX,MAA0B1C,QAAQ,CAAC,IAAD,CAAxC;AACA,QAAM;AAAA,OAAC2C,QAAD;AAAA,OAAWC;AAAX,MAA0B5C,QAAQ,CAAC,CAAD,CAAxC;AACA,QAAM;AAAA,OAAC6C,OAAD;AAAA,OAAUC;AAAV,MAAwB9C,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM;AAAA,OAAC+C,OAAD;AAAA,OAAUC;AAAV,MAAwBhD,QAAQ,CAACiD,IAAI,CAACC,KAAL,CAAWD,IAAI,EAAf,IAAmB,IAApB,CAAtC;AACA,QAAM;AAAA,OAACE,OAAD;AAAA,OAASC;AAAT,MAAuBpD,QAAQ,CAAC,IAAD,CAArC;AACA,QAAM;AAAA,OAACqD,WAAD;AAAA,OAAaC;AAAb,MAA+BtD,QAAQ,CAAC,KAAD,CAA7C;AACA,QAAM;AAAA,OAACuD,KAAD;AAAA,OAAOC;AAAP,MAAmBxD,QAAQ,CAAC,IAAD,CAAjC;AACA,QAAM;AAAA,OAACyD,YAAD;AAAA,OAAcC;AAAd,MAAiC1D,QAAQ,CAAC,IAAD,CAA/C;AACA,QAAM;AAAA,OAAC2D,wBAAD;AAAA,OAA0BC;AAA1B,MAAyD5D,QAAQ,CAAC,KAAD,CAAvE;AACA,QAAM;AAAA,OAAC6D,MAAD;AAAA,OAAQC;AAAR,MAAqB9D,QAAQ,CAAC,EAAD,CAAnC;AACA,QAAM;AAAA,OAAC+D,MAAD;AAAA,OAAQC;AAAR,MAAqBhE,QAAQ,CAAC,EAAD,CAAnC;AACA,QAAM;AAAA,OAACiE,MAAD;AAAA,OAAQC;AAAR,MAAqBlE,QAAQ,CAAC,EAAD,CAAnC;AACA,QAAM;AAAA,OAACmE,MAAD;AAAA,OAAQC;AAAR,MAAqBpE,QAAQ,CAAC,EAAD,CAAnC;AACA,QAAM;AAAA,OAACqE,MAAD;AAAA,OAAQC;AAAR,MAAqBtE,QAAQ,CAAC,KAAD,CAAnC;AACA,QAAM;AAAA,OAACuE,OAAD;AAAA,OAASC;AAAT,MAAuBxE,QAAQ,CAAC,MAAD,CAArC;AACA,QAAM;AAAA,OAACyE,aAAD;AAAA,OAAgBC;AAAhB,MAAoC1E,QAAQ,CAAC,KAAD,CAAlD;AACA,QAAM;AAAA,OAAC2E,cAAD;AAAA,OAAiBC;AAAjB,MAAsC5E,QAAQ,CAAC,KAAD,CAApD;AACA,QAAM;AAAA,OAAC6E,cAAD;AAAA,OAAiBC;AAAjB,MAAsC9E,QAAQ,CAAC,KAAD,CAApD;AACA,QAAM;AAAA,OAAC+E,aAAD;AAAA,OAAgBC;AAAhB,MAAoChF,QAAQ,CAAC;AAACiF,IAAAA,CAAC,EAAC,CAAH;AAAKC,IAAAA,CAAC,EAAC;AAAP,GAAD,CAAlD;AACA,QAAM;AAAA,OAACC,KAAD;AAAA,OAAQC;AAAR,MAAoBpF,QAAQ,CAAC,IAAD,CAAlC;AACA,QAAM;AAAA,OAACqF,aAAD;AAAA,OAAgBC;AAAhB,MAAoCtF,QAAQ,CAAC,CAAC;AAACiF,IAAAA,CAAC,EAAE,CAAJ;AAAOC,IAAAA,CAAC,EAAE;AAAV,GAAD,EAAc;AAACD,IAAAA,CAAC,EAAE,CAAJ;AAAOC,IAAAA,CAAC,EAAE;AAAV,GAAd,EAA2B;AAACD,IAAAA,CAAC,EAAE,CAAJ;AAAOC,IAAAA,CAAC,EAAE;AAAV,GAA3B,EAAwC;AAACD,IAAAA,CAAC,EAAE,CAAJ;AAAOC,IAAAA,CAAC,EAAE;AAAV,GAAxC,CAAD,CAAlD;AACA,QAAM;AAAA,OAACK,SAAD;AAAA,OAAWC;AAAX,MAA2BxF,QAAQ,CAAC,KAAD,CAAzC;AACAC,EAAAA,SAAS,CAAC,MAAM;AACZuF,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACH,GAFQ,EAEN,EAFM,CAAT;;AAKA,QAAMC,aAAa,GAAIC,GAAD,IAAQ;AAC1B,QAAIC,IAAI,GAAG,KAAX;AACApE,IAAAA,KAAK,CAACqE,OAAN,CAAeC,EAAD,IAAQ;AAClB,UAAGA,EAAE,KAAKH,GAAV,EAAc;AACVC,QAAAA,IAAI,GAAG,IAAP;AACH;AACJ,KAJD;AAKA,WAAOA,IAAP;AACH,GARD;;AASA,QAAMG,YAAY,GAAG,MAAM;AACvBtD,IAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACAkC,IAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACAE,IAAAA,iBAAiB,CAAC,KAAD,CAAjB;;AACA,QAAGnB,YAAY,KAAK,IAApB,EAA0B;AACtB3B,MAAAA,aAAa,CAAC;AAACiE,QAAAA,eAAe,EAAEtC;AAAlB,OAAD,CAAb;AACAqB,MAAAA,iBAAiB,CAAC,CAACD,cAAF,CAAjB;AACH;AACJ,GARD;;AASA,QAAMmB,kBAAkB,GAAG,MAAM;AAC7BxD,IAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACAkC,IAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACAE,IAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACAE,IAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACH,GALD;;AAOA,QAAMmB,aAAa,GAAG,MAAM;AACxBrC,IAAAA,2BAA2B,CAAC,KAAD,CAA3B;AACH,GAFD;;AAIA3D,EAAAA,SAAS,CAAC,MAAM;AAEZ,eAAkC;AAC9BiG,MAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBC,UAApB,GAAkC,SAAlC;AACAjD,MAAAA,UAAU,CAAC,IAAD,CAAV;AACA,YAAMkD,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACAtG,MAAAA,KAAK,CAACuG,GAAN,CAAUtG,GAAG,GAAG,gBAAhB,EAAkC;AAC9BuG,QAAAA,OAAO,EAAE;AACL,2BAAiB,YAAYJ;AADxB;AADqB,OAAlC,EAIGK,IAJH,CAISC,MAAD,IAAU;AACdxD,QAAAA,UAAU,CAAC,KAAD,CAAV;AACAtB,QAAAA,aAAa,CAAC8E,MAAM,CAACC,IAAP,CAAYA,IAAb,CAAb;;AACA,YAAGtB,SAAH,EAAa;AACb7B,UAAAA,eAAe,CAACkD,MAAM,CAACC,IAAP,CAAYA,IAAZ,CAAiBd,eAAlB,CAAf;AAAkD;;AAClD,YAAIe,GAAG,GAAG,EAAV;AACAF,QAAAA,MAAM,CAACC,IAAP,CAAYA,IAAZ,CAAiBd,eAAjB,CAAiCgB,aAAjC,CAA+C,CAA/C,EAAkDC,wBAAlD,CAA2E,CAA3E,EAA8EC,oBAA9E,CAAmGrB,OAAnG,CAA4GC,EAAD,IAAM;AAC7G,cAAGA,EAAE,CAACqB,OAAH,KAAe,IAAlB,EAAuB;AACnBjF,YAAAA,QAAQ,CAAC2D,OAAT,CAAkBuB,EAAD,IAAQ;AACrB,kBAAGA,EAAE,CAACjF,IAAH,KAAY2D,EAAE,CAACuB,IAAH,CAAQlF,IAAvB,EAA4B;AACxB4E,gBAAAA,GAAG,CAACO,IAAJ,CAAS;AAACnF,kBAAAA,IAAI,EAAC2D,EAAE,CAACuB,IAAH,CAAQlF,IAAd;AAAmBC,kBAAAA,IAAI,EAAEgF,EAAE,CAAChF;AAA5B,iBAAT;AACH;AACJ,aAJD;AAMH;AAEJ,SAVD;;AAaA,YAAG2E,GAAG,CAACQ,MAAJ,IAAY,CAAf,EAAiB;AACbxD,UAAAA,SAAS,CAACgD,GAAG,CAAC,CAAD,CAAH,CAAO3E,IAAR,CAAT;AACA6B,UAAAA,SAAS,CAAC8C,GAAG,CAAC,CAAD,CAAH,CAAO3E,IAAR,CAAT;AACA+B,UAAAA,SAAS,CAAC4C,GAAG,CAAC,CAAD,CAAH,CAAO3E,IAAR,CAAT;AACAiC,UAAAA,SAAS,CAAC0C,GAAG,CAAC,CAAD,CAAH,CAAO3E,IAAR,CAAT;AACH,SALD,MAMI;AACA,cAAG2E,GAAG,CAACQ,MAAJ,KAAe,CAAlB,EAAoB;AAChBxD,YAAAA,SAAS,CAACgD,GAAG,CAAC,CAAD,CAAH,CAAO3E,IAAR,CAAT;AACA6B,YAAAA,SAAS,CAAC8C,GAAG,CAAC,CAAD,CAAH,CAAO3E,IAAR,CAAT;AACA+B,YAAAA,SAAS,CAAC4C,GAAG,CAAC,CAAD,CAAH,CAAO3E,IAAR,CAAT;AACAiC,YAAAA,SAAS,CAAC,EAAD,CAAT;AACH;;AAED,cAAG0C,GAAG,CAACQ,MAAJ,KAAe,CAAlB,EAAoB;AAChBxD,YAAAA,SAAS,CAACgD,GAAG,CAAC,CAAD,CAAH,CAAO3E,IAAR,CAAT;AACA6B,YAAAA,SAAS,CAAC8C,GAAG,CAAC,CAAD,CAAH,CAAO3E,IAAR,CAAT;AACA+B,YAAAA,SAAS,CAAC,EAAD,CAAT;AACAE,YAAAA,SAAS,CAAC,EAAD,CAAT;AACH;;AAED,cAAG0C,GAAG,CAACQ,MAAJ,KAAe,CAAlB,EAAoB;AAChBxD,YAAAA,SAAS,CAACgD,GAAG,CAAC,CAAD,CAAH,CAAO3E,IAAR,CAAT;AACA6B,YAAAA,SAAS,CAAC,EAAD,CAAT;AACAE,YAAAA,SAAS,CAAC,EAAD,CAAT;AACAE,YAAAA,SAAS,CAAC,EAAD,CAAT;AACH;;AACD,cAAG0C,GAAG,CAACQ,MAAJ,KAAe,CAAlB,EAAoB;AAChBxD,YAAAA,SAAS,CAAC,EAAD,CAAT;AACAE,YAAAA,SAAS,CAAC,EAAD,CAAT;AACAE,YAAAA,SAAS,CAAC,EAAD,CAAT;AACAE,YAAAA,SAAS,CAAC,EAAD,CAAT;AACH;AACJ;;AAED9B,QAAAA,aAAa,CAACwE,GAAD,CAAb;AAEH,OA5DD,EA4DGS,KA5DH,CA4DUC,KAAD,IAAS;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,OA9DD;AA+DH;AAEJ,GAvEQ,EAuEN,EAvEM,CAAT;;AAyEA,QAAMG,aAAa,GAAG,mBAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAA5B;;AAEA,QAAMC,QAAQ,GAAG,CAAC;AAAEC,IAAAA,OAAF;AAAWC,IAAAA,OAAX;AAAoBC,IAAAA;AAApB,GAAD,KAAqC;AAElD,QAAIA,SAAJ,EAAe;AACX/F,MAAAA,MAAM,CAACqF,IAAP,CAAY,OAAZ,EAAqBV,IAArB,CAA2BqB,CAAD,IAAK,CAAE,CAAjC,EADW,CAEX;;AACA,aAAO,IAAP;AACH,KAJD,MAIO;AACH;AACA,UAAGH,OAAO,KAAK,EAAZ,IAAkBC,OAAO,KAAK,EAAjC,EAAoC;AAEhCtF,QAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACAoB,QAAAA,2BAA2B,CAAC,KAAD,CAA3B;AACAgB,QAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACAF,QAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACH;;AACD,0BACI;AAAA,mBACMmD,OAAO,GAAG,EAAV,GAAe,GAAf,GAAoB,EAD1B,OAC+BA,OAD/B,OAC0CC,OAAO,GAAG,EAAV,GAAe,GAAf,GAAoB,EAD9D,EACkEA,OADlE;AAAA,sBADJ;AAKH;AACJ,GArBD;;AAsBA,QAAMG,cAAc,GAAG,CAAC;AAAEJ,IAAAA,OAAF;AAAWC,IAAAA,OAAX;AAAoBC,IAAAA;AAApB,GAAD,KAAqC;AAExD,QAAIA,SAAJ,EAAe;AACXnE,MAAAA,2BAA2B,CAAC,KAAD,CAA3B;AACAsE,MAAAA,eAAe,CAACzF,QAAQ,CAAC2E,IAAT,CAAclF,IAAf,CAAf;AACA,aAAO,IAAP;AACH,KAJD,MAIO;AACH;AACA,0BACI;AAAA,mBACM,IADN,OACa4F,OADb;AAAA,sBADJ;AAKH;AACJ,GAdD,CA1K6B,CA0L7B;;;AAEA,QAAMI,eAAe,GAAG,CAACC,CAAD,EAAGtB,IAAH,EAAQ1B,KAAR,KAAkB;AAGtC,QAAGtD,OAAO,CAACA,OAAR,KAAoBuG,SAApB,IAAiCvG,OAAO,CAACA,OAAR,KAAoB,IAAxD,EAA6D;AAEzD,UAAIwG,OAAO,GAAGhG,UAAU,CAAC8C,KAAD,CAAxB;AACA,UAAIO,GAAG,GAAG0C,SAAV;;AACA,UAAGC,OAAO,KAAKD,SAAf,EAAyB;AACrB1C,QAAAA,GAAG,GAAI2C,OAAO,CAACnG,IAAf;;AACA,YAAGwD,GAAG,KAAK0C,SAAX,EAAqB;AACjB,cAAI3F,QAAQ,GAAGZ,OAAO,CAACA,OAAR,CAAgBkF,aAAhB,CAA8B,CAA9B,EACVC,wBADU,CACe,CADf,EAEVC,oBAFU,CAGVqB,MAHU,CAGF7F,QAAD,IAAcA,QAAQ,CAAC2E,IAAT,CAAclF,IAAd,IAAsBwD,GAHjC,EAGuC,CAHvC,CAAf;;AAMA,cAAGjD,QAAQ,KAAK2F,SAAhB,EAA0B;AACtB1F,YAAAA,WAAW,CAACD,QAAD,CAAX;;AACA,gBAAGA,QAAQ,CAACyE,OAAT,KAAqB,IAAxB,EAA6B;AAEzB,kBAAGzE,QAAQ,CAAC8F,SAAT,GAAsBtF,IAAI,CAACC,KAAL,CAAWD,IAAI,EAAf,IAAmB,IAA5C,EAAkD,CAEjD,CAFD,MAGI;AACAqB,gBAAAA,SAAS,CAAC,IAAD,CAAT,CADA,CAEA;;AACAc,gBAAAA,QAAQ,CAACD,KAAD,CAAR;AACH;AAEJ,aAXD,MAWK;AACDb,cAAAA,SAAS,CAAC,IAAD,CAAT;AACAc,cAAAA,QAAQ,CAACD,KAAD,CAAR;AACH;AAED;;AAEH;AACJ;AACJ;AAMJ;AAGJ,GA/CD;;AAiDA,QAAMqD,UAAU,GAAIC,EAAD,IAAQ;AACvB,QAAG5G,OAAO,CAACA,OAAR,KAAoBuG,SAApB,IAAiCvG,OAAO,CAACA,OAAR,KAAoB,IAAxD,EAA6D;AACzD,UAAG6G,QAAQ,CAACD,EAAD,EAAI,EAAJ,CAAR,IAAmB5G,OAAO,CAACA,OAAR,CAAgBkF,aAAhB,CAA8B,CAA9B,EAAiC4B,aAAvD,EAAqE;AACjE,eAAO,yBAAP;AACH,OAFD,MAGI;AACA,eAAO,sBAAP;AACH;AACJ,KAPD,MAQI;AACA,aAAO,sBAAP;AACH,KAXsB,CAavB;;AAGH,GAhBD;;AAkBA,QAAMC,aAAa,GAAIlD,GAAD,IAAS;AAG3B,QAAG7D,OAAO,CAACA,OAAR,KAAoBuG,SAApB,IAAiCvG,OAAO,CAACA,OAAR,KAAoB,IAAxD,EAA6D;AACzD,UAAIY,QAAQ,GAAGZ,OAAO,CAACA,OAAR,CAAgBkF,aAAhB,CAA8B,CAA9B,EACVC,wBADU,CACe,CADf,EAEVC,oBAFU,CAGVqB,MAHU,CAGF7F,QAAD,IAAcA,QAAQ,CAAC2E,IAAT,CAAclF,IAAd,IAAsBwD,GAHjC,EAGuC,CAHvC,CAAf;;AAKA,UAAGjD,QAAQ,KAAK2F,SAAhB,EAA0B;AACtB,YAAG3F,QAAQ,CAACyE,OAAT,KAAqB,IAAxB,EAA6B;AACzB,iBAAO,GAAP;AACH,SAFD,MAGI;AACA,iBAAQ,GAAR;AACH;AACJ,OAPD,MAQI;AACA,eAAO,GAAP;AACH;AAGJ,KAnBD,MAoBI;AACA,aAAO,GAAP;AACH;AAEJ,GA3BD;;AA6BA,QAAM2B,oBAAoB,GAAInD,GAAD,IAAS;AAElC,QAAG7D,OAAO,CAACA,OAAR,KAAoBuG,SAApB,IAAiCvG,OAAO,CAACA,OAAR,KAAoB,IAAxD,EAA6D;AACzD,UAAIY,QAAQ,GAAGZ,OAAO,CAACA,OAAR,CAAgBkF,aAAhB,CAA8B,CAA9B,EACVC,wBADU,CACe,CADf,EAEVC,oBAFU,CAGVqB,MAHU,CAGF7F,QAAD,IAAcA,QAAQ,CAAC2E,IAAT,CAAclF,IAAd,IAAsBwD,GAHjC,EAGuC,CAHvC,CAAf;;AAKA,UAAGjD,QAAQ,KAAK2F,SAAhB,EAA0B;AACtB,YAAG3F,QAAQ,CAACyE,OAAT,KAAqB,IAAxB,EAA6B;AACzB,iBAAO,IAAP;AACH,SAFD,MAGI;AACA,iBAAQ,KAAR;AACH;AACJ;;AACD,aAAO,KAAP;AAEH;;AACD,WAAO,KAAP;AAEH,GArBD;;AAuBA,QAAM4B,OAAO,GAAE,MAAM;AAEjB,QAAGzG,UAAU,CAACiF,MAAX,IAAmB,CAAtB,EAAwB;AACpBjF,MAAAA,UAAU,CAACgF,IAAX,CAAgBhF,UAAU,CAAC0G,KAAX,EAAhB;AACAjF,MAAAA,SAAS,CAACzB,UAAU,CAAC,CAAD,CAAV,CAAcF,IAAf,CAAT;AACA6B,MAAAA,SAAS,CAAC3B,UAAU,CAAC,CAAD,CAAV,CAAcF,IAAf,CAAT;AACA+B,MAAAA,SAAS,CAAC7B,UAAU,CAAC,CAAD,CAAV,CAAcF,IAAf,CAAT;AACAiC,MAAAA,SAAS,CAAC/B,UAAU,CAAC,CAAD,CAAV,CAAcF,IAAf,CAAT;AACH;AACJ,GATD;;AAUA,QAAM6G,SAAS,GAAE,MAAM;AAGnB,QAAG3G,UAAU,CAACiF,MAAX,IAAmB,CAAtB,EAAwB;AACpBjF,MAAAA,UAAU,CAAC4G,OAAX,CAAmB5G,UAAU,CAAC6G,GAAX,EAAnB;AACApF,MAAAA,SAAS,CAACzB,UAAU,CAAC,CAAD,CAAV,CAAcF,IAAf,CAAT;AACA6B,MAAAA,SAAS,CAAC3B,UAAU,CAAC,CAAD,CAAV,CAAcF,IAAf,CAAT;AACA+B,MAAAA,SAAS,CAAC7B,UAAU,CAAC,CAAD,CAAV,CAAcF,IAAf,CAAT;AACAiC,MAAAA,SAAS,CAAC/B,UAAU,CAAC,CAAD,CAAV,CAAcF,IAAf,CAAT;AACH;AAGJ,GAZD;;AAaA,QAAMgH,WAAW,GAAIhB,CAAD,IAAM;AACtB,eAAkC;AAC/B;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMS;AACJ,GApBD;;AAqBA,iBAAeiB,YAAf,CAA8BX,EAA9B,EAAiCY,MAAjC,EAA0C;AACtC,eAAkC;AAC9B,YAAM/C,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACAlD,MAAAA,cAAc,CAAC,IAAD,CAAd;AACApD,MAAAA,KAAK,CAACoJ,IAAN,CAAWnJ,GAAG,GAAG,sBAAjB,EACI;AAACsI,QAAAA,EAAD;AAAIY,QAAAA;AAAJ,OADJ,EACgB;AACR3C,QAAAA,OAAO,EAAE;AACL,2BAAiB,YAAYJ;AADxB;AADD,OADhB,EAOEK,IAPF,CAOQC,MAAD,IACP;AAEItD,QAAAA,cAAc,CAAC,KAAD,CAAd;AACAE,QAAAA,QAAQ,CAACoD,MAAM,CAACC,IAAP,CAAYA,IAAZ,CAAiBwC,MAAjB,CAAwBnC,OAAzB,CAAR;AACA5D,QAAAA,cAAc,CAAC,KAAD,CAAd;;AAEA,YAAGsD,MAAM,CAACC,IAAP,CAAYA,IAAZ,CAAiBd,eAAjB,KAAqCqC,SAAxC,EAAkD;AAC9C,cAAIzC,IAAI,GAAG9D,OAAO,CAACA,OAAR,CAAgBkF,aAAhB,CAA8B,CAA9B,EAAiC4B,aAAjC,KAAmD,CAAnD,IAAwD/B,MAAM,CAACC,IAAP,CAAYA,IAAZ,CAAiBd,eAAjB,CAAiCgB,aAAjC,CAA+C,CAA/C,EAAkD4B,aAAlD,KAAoE,EAAvI;;AACA,cAAGhD,IAAI,KAAK,KAAZ,EAAkB;AACd7D,YAAAA,aAAa,CAAC8E,MAAM,CAACC,IAAP,CAAYA,IAAb,CAAb;AACH,WAFD,MAGI;AACA,gBAAGD,MAAM,CAACC,IAAP,CAAYA,IAAZ,CAAiBd,eAAjB,CAAiCwD,aAAjC,KAAmD,EAAtD,EAAyD;AACrDzH,cAAAA,aAAa,CAAC;AAACiE,gBAAAA,eAAe,EAAEtC;AAAlB,eAAD,CAAb;AACAzB,cAAAA,MAAM,CAACqF,IAAP,CAAY,MAAZ,EAAoBV,IAApB,CAA0BqB,CAAD,IAAK,CAAE,CAAhC;AACH,aAHD,MAII;AACAtE,cAAAA,eAAe,CAACkD,MAAM,CAACC,IAAP,CAAYA,IAAZ,CAAiBd,eAAlB,CAAf;;AACA,kBAAG,CAAClB,cAAJ,EAAmB;AACfD,gBAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACAE,gBAAAA,iBAAiB,CAAC,CAACD,cAAF,CAAjB;AACH,eAHD,MAII;AACAD,gBAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACA9C,gBAAAA,aAAa,CAAC;AAACiE,kBAAAA,eAAe,EAAEtC;AAAlB,iBAAD,CAAb;AAEH;AAEJ;AAEJ;;AAED,cAAIqD,GAAG,GAAG,EAAV;AACAF,UAAAA,MAAM,CAACC,IAAP,CAAYA,IAAZ,CAAiBd,eAAjB,CAAiCgB,aAAjC,CAA+C,CAA/C,EAAkDC,wBAAlD,CAA2E,CAA3E,EAA8EC,oBAA9E,CAAmGrB,OAAnG,CAA4GC,EAAD,IAAM;AAC7G,gBAAGA,EAAE,CAACqB,OAAH,KAAe,IAAlB,EAAuB;AACnBjF,cAAAA,QAAQ,CAAC2D,OAAT,CAAkBuB,EAAD,IAAQ;AACrB,oBAAGA,EAAE,CAACjF,IAAH,KAAY2D,EAAE,CAACuB,IAAH,CAAQlF,IAAvB,EAA4B;AACxB4E,kBAAAA,GAAG,CAACO,IAAJ,CAAS;AAACnF,oBAAAA,IAAI,EAAC2D,EAAE,CAACuB,IAAH,CAAQlF,IAAd;AAAmBC,oBAAAA,IAAI,EAAEgF,EAAE,CAAChF;AAA5B,mBAAT;AACH;AACJ,eAJD;AAMH;AAEJ,WAVD;;AAaA,cAAG2E,GAAG,CAACQ,MAAJ,IAAY,CAAf,EAAiB;AACbxD,YAAAA,SAAS,CAACgD,GAAG,CAAC,CAAD,CAAH,CAAO3E,IAAR,CAAT;AACA6B,YAAAA,SAAS,CAAC8C,GAAG,CAAC,CAAD,CAAH,CAAO3E,IAAR,CAAT;AACA+B,YAAAA,SAAS,CAAC4C,GAAG,CAAC,CAAD,CAAH,CAAO3E,IAAR,CAAT;AACAiC,YAAAA,SAAS,CAAC0C,GAAG,CAAC,CAAD,CAAH,CAAO3E,IAAR,CAAT;AACH,WALD,MAMI;AACA,gBAAG2E,GAAG,CAACQ,MAAJ,KAAe,CAAlB,EAAoB;AAChBxD,cAAAA,SAAS,CAACgD,GAAG,CAAC,CAAD,CAAH,CAAO3E,IAAR,CAAT;AACA6B,cAAAA,SAAS,CAAC8C,GAAG,CAAC,CAAD,CAAH,CAAO3E,IAAR,CAAT;AACA+B,cAAAA,SAAS,CAAC4C,GAAG,CAAC,CAAD,CAAH,CAAO3E,IAAR,CAAT;AACAiC,cAAAA,SAAS,CAAC,EAAD,CAAT;AACH;;AAED,gBAAG0C,GAAG,CAACQ,MAAJ,KAAe,CAAlB,EAAoB;AAChBxD,cAAAA,SAAS,CAACgD,GAAG,CAAC,CAAD,CAAH,CAAO3E,IAAR,CAAT;AACA6B,cAAAA,SAAS,CAAC8C,GAAG,CAAC,CAAD,CAAH,CAAO3E,IAAR,CAAT;AACA+B,cAAAA,SAAS,CAAC,EAAD,CAAT;AACAE,cAAAA,SAAS,CAAC,EAAD,CAAT;AACH;;AAED,gBAAG0C,GAAG,CAACQ,MAAJ,KAAe,CAAlB,EAAoB;AAChBxD,cAAAA,SAAS,CAACgD,GAAG,CAAC,CAAD,CAAH,CAAO3E,IAAR,CAAT;AACA6B,cAAAA,SAAS,CAAC,EAAD,CAAT;AACAE,cAAAA,SAAS,CAAC,EAAD,CAAT;AACAE,cAAAA,SAAS,CAAC,EAAD,CAAT;AACH;;AACD,gBAAG0C,GAAG,CAACQ,MAAJ,KAAe,CAAlB,EAAoB;AAChBxD,cAAAA,SAAS,CAAC,EAAD,CAAT;AACAE,cAAAA,SAAS,CAAC,EAAD,CAAT;AACAE,cAAAA,SAAS,CAAC,EAAD,CAAT;AACAE,cAAAA,SAAS,CAAC,EAAD,CAAT;AACH;AACJ;;AAED9B,UAAAA,aAAa,CAACwE,GAAD,CAAb;AACH;AAEJ,OA5FD,EA6FAS,KA7FA,CA6FM,UAAUC,KAAV,EAAiB;AACnBlE,QAAAA,cAAc,CAAC,KAAD,CAAd;;AACA,YAAIkE,KAAK,CAACgC,QAAV,EAAoB;AAChB;AACA5I,UAAAA,OAAO,CAAC6I,OAAR,CAAgBjC,KAAK,CAACgC,QAAN,CAAe3C,IAAf,CAAoBjG,OAApC,EAFgB,CAGhB;AACA;;AACA,cAAG4G,KAAK,CAACgC,QAAN,CAAe3C,IAAf,CAAoBA,IAApB,KAA4BuB,SAA5B,IAA0CZ,KAAK,CAACgC,QAAN,CAAe3C,IAAf,CAAoBA,IAApB,CAAyB6C,IAAzB,KAAkCtB,SAA5E,IAA0FZ,KAAK,CAACgC,QAAN,CAAe3C,IAAf,CAAoBA,IAApB,CAAyB6C,IAAzB,KAAkC,IAA/H,EAAoI;AAChI,oBAAQlC,KAAK,CAACgC,QAAN,CAAe3C,IAAf,CAAoBA,IAApB,CAAyB6C,IAAjC;AACI,mBAAK,oBAAL;AACIlH,gBAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACAV,gBAAAA,aAAa,CAAC;AAACiE,kBAAAA,eAAe,EAAE;AAAlB,iBAAD,CAAb;AACA;;AACJ,mBAAK,eAAL;AACGjE,gBAAAA,aAAa,CAAC0F,KAAK,CAACgC,QAAN,CAAe3C,IAAf,CAAoBA,IAArB,CAAb;;AACC,oBAAGW,KAAK,CAACgC,QAAN,CAAe3C,IAAf,CAAoBA,IAApB,CAAyBd,eAAzB,CAAyCwD,aAAzC,GAAyD/B,KAAK,CAACgC,QAAN,CAAe3C,IAAf,CAAoBA,IAApB,CAAyBd,eAAzB,CAAyC4D,cAArG,EAAqH;AACjH3H,kBAAAA,MAAM,CAACqF,IAAP,CAAY,OAAZ,EAAqBV,IAArB,CAA2BqB,CAAD,IAAK,CAAE,CAAjC;AACH,iBAFD,MAGI;AACAhG,kBAAAA,MAAM,CAACqF,IAAP,CAAY,MAAZ,EAAoBV,IAApB,CAA0BqB,CAAD,IAAK,CAAE,CAAhC;AACH;;AACD;;AACJ,mBAAK,uBAAL;AACI,oBAAGnG,OAAO,CAACA,OAAR,CAAgB0H,aAAhB,KAAkC,EAArC,EAAwC;AACpCvH,kBAAAA,MAAM,CAACqF,IAAP,CAAY,MAAZ,EAAoBV,IAApB,CAA0BqB,CAAD,IAAK,CAAE,CAAhC;AACH,iBAFD,MAGI;AACA,6BAAkC;AAC9B4B,oBAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACH;AACJ;;AACD;;AACJ,mBAAK,gBAAL;AACI;;AACJ;AACI;AA3BR;AA8BH;AAEJ,SAtCD,MAsCO,IAAItC,KAAK,CAACuC,OAAV,EAAmB;AACtBtC,UAAAA,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACuC,OAAlB;AACH,SAFM,MAEA;AACHtC,UAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBF,KAAK,CAAC5G,OAA3B;AACH;AACJ,OA1ID;AA2IH;AAEJ;;AACD,QAAMoJ,QAAQ,GAAG,CAAC7B,CAAD,EAAGtB,IAAH,KAAY;AACzBoD,IAAAA,UAAU,CAAC,MAAI;AACX,UAAG,CAAC5G,WAAJ,EAAgB;AACZiB,QAAAA,SAAS,CAAC,KAAD,CAAT;AACAE,QAAAA,UAAU,CAAC,MAAD,CAAV;AACAc,QAAAA,gBAAgB,CAAC,CAAC;AAACL,UAAAA,CAAC,EAAE,CAAJ;AAAOC,UAAAA,CAAC,EAAE;AAAV,SAAD,EAAc;AAACD,UAAAA,CAAC,EAAE,CAAJ;AAAOC,UAAAA,CAAC,EAAE;AAAV,SAAd,EAA2B;AAACD,UAAAA,CAAC,EAAE,CAAJ;AAAOC,UAAAA,CAAC,EAAE;AAAV,SAA3B,EAAwC;AAACD,UAAAA,CAAC,EAAE,CAAJ;AAAOC,UAAAA,CAAC,EAAE;AAAV,SAAxC,CAAD,CAAhB;AACH;AACJ,KANS,EAMR,CANQ,CAAV,CADyB,CAWzB;AACA;AACA;AACH,GAdD;;AAgBA,QAAMgF,cAAc,GAAG,CAAC/B,CAAD,EAAIgC,EAAJ,EAAQhF,KAAR,KAAkB;AACrC,QAAIiF,GAAG,GAAI,CAAC;AAACnF,MAAAA,CAAC,EAAE,CAAJ;AAAOC,MAAAA,CAAC,EAAE;AAAV,KAAD,EAAc;AAACD,MAAAA,CAAC,EAAE,CAAJ;AAAOC,MAAAA,CAAC,EAAE;AAAV,KAAd,EAA2B;AAACD,MAAAA,CAAC,EAAE,CAAJ;AAAOC,MAAAA,CAAC,EAAE;AAAV,KAA3B,EAAwC;AAACD,MAAAA,CAAC,EAAE,CAAJ;AAAOC,MAAAA,CAAC,EAAE;AAAV,KAAxC,CAAX;AACAkF,IAAAA,GAAG,CAACjF,KAAD,CAAH,GAAW;AAACF,MAAAA,CAAC,EAAEI,aAAa,CAACF,KAAD,CAAb,CAAqBF,CAArB,GAAyBkF,EAAE,CAACE,MAAhC;AAAwCnF,MAAAA,CAAC,EAAEG,aAAa,CAACF,KAAD,CAAb,CAAqBD,CAArB,GAAyBiF,EAAE,CAACG;AAAvE,KAAX;AACAhF,IAAAA,gBAAgB,CAAC8E,GAAD,CAAhB;AACH,GAJD;;AAKA,QAAMG,UAAU,GAAG,CAACpC,CAAD,EAAGzC,GAAH,KAAW;AAC1B,QAAGjD,QAAQ,KAAK,IAAhB,EAAqB;AACjBa,MAAAA,cAAc,CAAC,IAAD,CAAd;AACA8F,MAAAA,YAAY,CAAC3G,QAAQ,CAACgG,EAAV,EAAa/C,GAAb,CAAZ;AACA+B,MAAAA,OAAO,CAACC,GAAR,CAAYjF,QAAQ,CAACgG,EAArB;AAEH;AACJ,GAPD;;AAWA,MAAG5G,OAAO,IAAIA,OAAO,CAACA,OAAtB,EAA8B;AAAA;;AAC1B,wBACI;AAAA,6BACI;AAAK,QAAA,KAAK,EAAE;AAAC2I,UAAAA,KAAK,EAAC,OAAP;AAAeC,UAAAA,MAAM,EAAE,OAAvB;AAAgCpE,UAAAA,UAAU,EAAE;AAA5C,SAAZ;AAAA,gCAEI,QAAC,KAAD;AAAO,UAAA,QAAQ,EAAE,KAAjB;AAAwB,UAAA,MAAM,EAAE,IAAhC;AAAsC,UAAA,OAAO,EAAE5B,aAA/C;AAA+D,UAAA,QAAQ,EAAEuB,kBAAzE;AAAA,iCACI;AAAS,YAAA,SAAS,EAAC,qCAAnB;AAAyD,YAAA,KAAK,EAAE;AAACyE,cAAAA,MAAM,EAAC;AAAR,aAAhE;AAAA,mCAII;AAAM,cAAA,SAAS,EAAC,+CAAhB;AAAgE,cAAA,OAAO,EAAE3E,YAAzE;AAAA,sCAEI;AAAK,gBAAA,KAAK,EAAE;AAAC4E,kBAAAA,eAAe,EAAE,OAAMnK,MAAO,GAA/B;AAAkCoK,kBAAAA,cAAc,EAAC,OAAjD;AAAyDH,kBAAAA,KAAK,EAAC,OAA/D;AAAuEC,kBAAAA,MAAM,EAAC;AAA9E,iBAAZ;AAAqG,gBAAA,SAAS,EAAC,4BAA/G;AAAA,uCAChC;AAAM,kBAAA,KAAK,EAAE;AAAC9I,oBAAAA,SAAS,EAAC,EAAX;AAAcF,oBAAAA,QAAQ,EAAC;AAAvB,mBAAb;AAAA,yCACA,QAAC,SAAD;AAAW,oBAAA,IAAI,EAAEsB,OAAO,GAAC,IAAR,GAAe,CAAC,qBAAAlB,OAAO,CAACA,OAAR,sEAAiB+I,eAAjB,IAAmC7H,OAApC,IAA6C,IAA7E;AAAmF,oBAAA,QAAQ,EAAE6E;AAA7F;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADgC;AAAA;AAAA;AAAA;AAAA,sBAFJ,eAUI;AAAK,gBAAA,SAAS,EAAC,kDAAf;AAAA,uCAEI;AAAI,kBAAA,KAAK,EAAE;AAACnG,oBAAAA,QAAQ,EAAC;AAAV,mBAAX;AAA8B,kBAAA,SAAS,EAAC,QAAxC;AAAA,yDAEI;AAAM,oBAAA,KAAK,EAAE;AAACA,sBAAAA,QAAQ,EAAC,EAAV;AAAaoJ,sBAAAA,WAAW,EAAC;AAAzB,qBAAb;AAAA,2CACxC,QAAC,SAAD;AAAW,sBAAA,IAAI,EAAE9H,OAAO,GAAC,IAAR,GAAe,CAAC,sBAAAlB,OAAO,CAACA,OAAR,wEAAiB+I,eAAjB,IAAmC7H,OAApC,IAA6C,IAA7E;AAAmF,sBAAA,QAAQ,EAAE6E;AAA7F;AAAA;AAAA;AAAA;AAAA;AADwC;AAAA;AAAA;AAAA;AAAA,0BAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,sBAVJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAJJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBAFJ,eA2CI,QAAC,KAAD;AAAO,UAAA,QAAQ,EAAE,KAAjB;AAAwB,UAAA,MAAM,EAAE,IAAhC;AAAsC,UAAA,OAAO,EAAEjD,cAA/C;AAAgE,UAAA,QAAQ,EAAEmB,YAA1E;AAAA,iCAGI;AAAK,YAAA,SAAS,EAAC,wEAAf;AAAA,oCAEI;AAAK,cAAA,SAAS,EAAC,6CAAf;AAAA,sCAGI;AAAK,gBAAA,GAAG,EAAE7E,UAAV;AAAsB,gBAAA,SAAS,EAAC;AAAhC;AAAA;AAAA;AAAA;AAAA,sBAHJ,eAQI;AAAO,gBAAA,SAAS,EAAC,mBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBARJ,eAeI;AAAM,gBAAA,SAAS,EAAC,aAAhB;AAAA,8FAA2E;AAAA;AAAA;AAAA;AAAA,wBAA3E,wBAE3B;AAAM,kBAAA,KAAK,EAAE;AAAC6J,oBAAAA,UAAU,EAAE;AAAb,mBAAb;AAAA,iDAAoCjJ,OAAO,CAACA,OAA5C,+EAAoC,kBAAiBkF,aAAjB,CAA+B,CAA/B,CAApC,0DAAoC,sBAAmCgE,IAAnC,CAAwC7I;AAA5E;AAAA;AAAA;AAAA;AAAA,wBAF2B;AAAA;AAAA;AAAA;AAAA;AAAA,sBAfJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ,eA2BI;AAAK,cAAA,GAAG,EAAEhB,MAAV;AAAkB,cAAA,SAAS,EAAC;AAA5B;AAAA;AAAA;AAAA;AAAA,oBA3BJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAHJ;AAAA;AAAA;AAAA;AAAA,gBA3CJ,eAkFI;AACI,UAAA,WAAW,EAAGiH,CAAD,IAAKgB,WAAW,CAAChB,CAAD,CADjC;AAII,UAAA,KAAK,EAAC,MAJV;AAKI,UAAA,MAAM,EAAC,MALX;AAOI,UAAA,OAAO,EAAC,gBAPZ;AAQI,UAAA,KAAK,EAAC,4BARV;AASI,UAAA,UAAU,EAAC,8BATf;AAAA,kCAWI;AAAM,YAAA,EAAE,EAAC,kBAAT;AAAA,mCACI;AAAO,cAAA,EAAE,EAAC,WAAV;AAAA,wBAEQ;AAFR;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBAXJ,eAmBI;AAAA,mCACI;AACI,cAAA,EAAE,EAAC,OADP;AAEI,cAAA,KAAK,EAAC,GAFV;AAGI,cAAA,MAAM,EAAC,GAHX;AAAA,uEAKI;AAAM,gBAAA,CAAC,EAAE,EAAT;AACM,gBAAA,CAAC,EAAE,CADT;AACY,gBAAA,QAAQ,EAAC,GADrB;AAAA,uCAC0B,QAAC,SAAD;AAAW,kBAAA,IAAI,EAAEpF,OAAO,GAAC,IAAR,GAAgB,CAAC,sBAAAlB,OAAO,CAACA,OAAR,wEAAiB+I,eAAjB,IAAmC7H,OAApC,IAA6C,IAA9E;AAAoF,kBAAA,QAAQ,EAAE6E;AAA9F;AAAA;AAAA;AAAA;AAAA;AAD1B;AAAA;AAAA;AAAA;AAAA,sBALJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBAnBJ,eA6BI;AAAA,mCACI;AACI,cAAA,EAAE,EAAC,MADP;AAEI,cAAA,KAAK,EAAC,GAFV;AAGI,cAAA,MAAM,EAAC,IAHX;AAAA,uEAKI;AAAM,gBAAA,CAAC,EAAE,CAAT;AACM,gBAAA,CAAC,EAAE,CADT;AACY,gBAAA,QAAQ,EAAC,IADrB;AAC0B,gBAAA,KAAK,EAAE;AAACoD,kBAAAA,WAAW,EAAE,KAAd;AAAoBC,kBAAAA,MAAM,EAAE;AAA5B;AADjC;AAAA;AAAA;AAAA;AAAA,sBALJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBA7BJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAlFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ,qBADJ;AAiJH,GAlJD,MAkJK;AACD,wBAAO,QAAC,SAAD;AAAA;AAAA;AAAA;AAAA,YAAP;AACH;AAEJ","sourcesContent":["import React,{useState,useEffect} from 'react';\nimport axios from \"axios\";\nimport {URL} from \"../../urlapi\";\nimport {Layout,Modal,Progress} from 'antd';\nimport chrono from '../../public/assets/chrono.png';\nimport Countdown from \"react-countdown\";\nimport boueevide from \"../../public/assets/nouvelle-bouee-vide.png\"\nimport boueeremplie from \"../../public/assets/nouvelle-bouee-remplie.png\"\nimport { Spin,message } from 'antd';\nimport { LoadingOutlined } from '@ant-design/icons';\nimport chronoRed from \"../../public/assets/chrono-rouge.png\";\nimport Draggable, {DraggableCore} from 'react-draggable'\nimport vistaplage from \"../../public/assets/vistaplage3.png\";\nimport etoile from \"../../public/assets/etoile.png\";\nimport {useAuth} from \"../../store\";\nimport {useRouter} from \"next/router\";\nimport EmptyData from \"../../components/EmptyData\";\n\nconst pathSecour = \"../../secour/\";\nconst areas = ['baigneurs','bouee','drapeau-droit',\n    'drapeau-gauche','helicoptere','jetski','jumelles',\n    'palmes','radio','voiture'];\n\nconst antIcon = <LoadingOutlined style={{ fontSize: 40,color:'#1d893c',marginTop:30 }} spin />;\nexport default function  Home () {\n\n    const { session, updateSession, deleteSession } = useAuth();\n    const router = useRouter()\n    const allImage = [\n        {name: 'groupe_de_baigneurs', file:'baigneurs.png', key: \"1\"},\n        {name: 'bouee_tube',file: 'bouee_tube.png', key: \"2\"},\n        {name: 'drapeau_1',file: 'drapeau_gauche.png', key: \"3\"},\n        {name: 'drapeau_2',file: 'drapeau_droite.png', key: \"4\"},\n        {name: 'helicoptere',file: 'helicoptere.png', key: \"5\"},\n        {name: 'jetski',file: 'jetski.png', key: \"6\"},\n        {name: 'jumelles',file: 'jumelles.png', key: \"7\"},\n        {name: 'palmes',file: 'palmes.png', key: \"8\"},\n        {name: 'radio',file: 'radio.png', key: \"9\"},\n        {name: 'voiture_4_4',file: 'voiture.png', key: \"10\"}];\n    const [arrayImage, setArrayImage] = useState([]);\n    const [isModalVisible, setIsModalVisible] = useState(false);\n    const [question, setQuestion] = useState(null);\n    const [position, setPosition] = useState(1);\n    const [answers, setAnswers] = useState([]);\n    const [dateNow, setDateNow] = useState(Date.parse(Date())/1000);\n    const [loading,setLoading] = useState(true)\n    const [loadingResp,setLoadingResp] = useState(false)\n    const [verif,setVerif] = useState(null)\n    const [localSession,setLocalSession] = useState(null)\n    const [isModalLockedToolVisible,setIsModalLockedToolVisible] = useState(false)\n    const [slide1,setSlide1] = useState(\"\")\n    const [slide2,setSlide2] = useState(\"\")\n    const [slide3,setSlide3] = useState(\"\")\n    const [slide4,setSlide4] = useState(\"\")\n    const [onmove,setOnmove] = useState(false)\n    const [carAxis,setCarAxis] = useState('both')\n    const [isModalChrono, setIsModalChrono] = useState(false);\n    const [isModalEndStep, setIsModalEndStep] = useState(false);\n    const [closeOnEndStep, setCloseOnEndStep] = useState(false);\n    const [mousePosition, setMousePosition] = useState({x:0,y:0});\n    const [index, setIndex] = useState(null);\n    const [positionSlide, setPositionSlide] = useState([{x: 0, y: 0},{x: 0, y: 0},{x: 0, y: 0},{x: 0, y: 0}]);\n    const [isMounted,setIsMounted] = useState(false)\n    useEffect(() => {\n        setIsMounted(true)\n    }, [])\n\n\n    const isDisplayable = (tag) =>{\n        let test = false\n        areas.forEach((el) => {\n            if(el === tag){\n                test = true\n            }\n        })\n        return test\n    }\n    const handleCancel = () => {\n        setIsModalVisible(false);\n        setIsModalChrono(false)\n        setIsModalEndStep(false)\n        if(localSession !== null) {\n            updateSession({running_session: localSession})\n            setCloseOnEndStep(!closeOnEndStep)\n        }\n    };\n    const handleCancelChrono = () => {\n        setIsModalVisible(false);\n        setIsModalChrono(false)\n        setIsModalEndStep(false)\n        setCloseOnEndStep(false)\n    };\n\n    const handleCancel2 = () => {\n        setIsModalLockedToolVisible(false);\n    };\n\n    useEffect(() => {\n\n        if (typeof window !== \"undefined\"){\n            document.body.style.background =  '#eaac3d';\n            setLoading(true)\n            const token = localStorage.getItem(\"token\")\n            axios.get(URL + '/api/user/info', {\n                headers: {\n                    'Authorization': 'Bearer ' + token\n                }\n            }).then((result)=>{\n                setLoading(false)\n                updateSession(result.data.data)\n                if(isMounted){\n                setLocalSession(result.data.data.running_session)}\n                let tab = [];\n                result.data.data.running_session.session_steps[3].session_step_backgrounds[0].tool_session_answers.forEach((el)=>{\n                    if(el.is_true !== true){\n                        allImage.forEach((im) => {\n                            if(im.name === el.tool.name){\n                                tab.push({name:el.tool.name,file: im.file})\n                            }\n                        })\n\n                    }\n\n                })\n\n\n                if(tab.length>=4){\n                    setSlide1(tab[0].file)\n                    setSlide2(tab[1].file)\n                    setSlide3(tab[2].file)\n                    setSlide4(tab[3].file)\n                }\n                else{\n                    if(tab.length === 3){\n                        setSlide1(tab[0].file)\n                        setSlide2(tab[1].file)\n                        setSlide3(tab[2].file)\n                        setSlide4(\"\")\n                    }\n\n                    if(tab.length === 2){\n                        setSlide1(tab[0].file)\n                        setSlide2(tab[1].file)\n                        setSlide3(\"\")\n                        setSlide4(\"\")\n                    }\n\n                    if(tab.length === 1){\n                        setSlide1(tab[0].file)\n                        setSlide2(\"\")\n                        setSlide3(\"\")\n                        setSlide4(\"\")\n                    }\n                    if(tab.length === 0){\n                        setSlide1(\"\")\n                        setSlide2(\"\")\n                        setSlide3(\"\")\n                        setSlide4(\"\")\n                    }\n                }\n\n                setArrayImage(tab)\n\n            }).catch((error)=>{\n                console.log(error)\n            });\n        }\n\n    }, []);\n\n    const Completionist = () => <span>00:00</span>;\n\n    const renderer = ({ minutes, seconds, completed }) => {\n\n        if (completed) {\n            router.push('/lost').then((r)=>{});\n            // Render a complete state\n            return null;\n        } else {\n            // Render a countdown\n            if(minutes === 25 && seconds === 59){\n\n                setIsModalVisible(false)\n                setIsModalLockedToolVisible(false)\n                setIsModalEndStep(false)\n                setIsModalChrono(true)\n            }\n            return (\n                <>\n                    { minutes < 10 ? '0' :''} {minutes}:{ seconds < 10 ? '0' :''}{seconds}\n                </>\n            );\n        }\n    };\n    const rendererUnlock = ({ minutes, seconds, completed }) => {\n\n        if (completed) {\n            setIsModalLockedToolVisible(false)\n            displayQuestion(question.tool.name)\n            return null;\n        } else {\n            // Render a countdown\n            return (\n                <>\n                    { '00'}:{seconds}\n                </>\n            );\n        }\n    };\n\n    // display question\n\n    const displayQuestion = (e,data,index) => {\n\n\n        if(session.session !== undefined && session.session !== null){\n\n            let tabItem = arrayImage[index]\n            let tag = undefined;\n            if(tabItem !== undefined){\n                tag =  tabItem.name;\n                if(tag !== undefined){\n                    let question = session.session.session_steps[3]\n                        .session_step_backgrounds[0]\n                        .tool_session_answers\n                        .filter((question) => question.tool.name == tag )[0]\n\n\n                    if(question !== undefined){\n                        setQuestion(question)\n                        if(question.is_true !== true){\n\n                            if(question.next_time > (Date.parse(Date())/1000)){\n\n                            }\n                            else{\n                                setOnmove(true)\n                                //setIsModalVisible(true)\n                                setIndex(index)\n                            }\n\n                        }else{\n                            setOnmove(true)\n                            setIndex(index)\n                        }\n\n                        /**/\n\n                    }\n                }\n            }\n\n\n\n\n\n        }\n\n\n    }\n\n    const goodAnswer = (id) => {\n        if(session.session !== undefined && session.session !== null){\n            if(parseInt(id,10) <= session.session.session_steps[2].question_true){\n                return \"../../bouee-remplie.png\"\n            }\n            else{\n                return \"../../bouee-vide.png\"\n            }\n        }\n        else{\n            return \"../../bouee-vide.png\"\n        }\n\n        //return \"../../bouee-vide.png\"\n\n\n    }\n\n    const zoneIsVisible = (tag) => {\n\n\n        if(session.session !== undefined && session.session !== null){\n            let question = session.session.session_steps[3]\n                .session_step_backgrounds[0]\n                .tool_session_answers\n                .filter((question) => question.tool.name == tag )[0]\n\n            if(question !== undefined){\n                if(question.is_true !== true){\n                    return \"0\";\n                }\n                else{\n                    return  \"1\";\n                }\n            }\n            else{\n                return \"0\";\n            }\n\n\n        }\n        else{\n            return \"0\";\n        }\n\n    }\n\n    const zoneIsVisibleOnHover = (tag) => {\n\n        if(session.session !== undefined && session.session !== null){\n            let question = session.session.session_steps[3]\n                .session_step_backgrounds[0]\n                .tool_session_answers\n                .filter((question) => question.tool.name == tag )[0]\n\n            if(question !== undefined){\n                if(question.is_true !== true){\n                    return true;\n                }\n                else{\n                    return  false;\n                }\n            }\n            return false;\n\n        }\n        return false;\n\n    }\n\n    const slideUp =() => {\n\n        if(arrayImage.length>=4){\n            arrayImage.push(arrayImage.shift());\n            setSlide1(arrayImage[0].file)\n            setSlide2(arrayImage[1].file)\n            setSlide3(arrayImage[2].file)\n            setSlide4(arrayImage[3].file)\n        }\n    }\n    const slideDown =() => {\n\n\n        if(arrayImage.length>=4){\n            arrayImage.unshift(arrayImage.pop());\n            setSlide1(arrayImage[0].file)\n            setSlide2(arrayImage[1].file)\n            setSlide3(arrayImage[2].file)\n            setSlide4(arrayImage[3].file)\n        }\n\n\n    }\n    const onMouseMove = (e) =>{\n        if (typeof window !== \"undefined\"){\n           /* if(onmove && index!== null){\n                console.log({x:e.pageX,y:e.pageY})\n                //console.log(document.getElementById('prefix__rect4014').getBoundingClientRect())\n                console.log(document.getElementById('prefix__rect1514').getBoundingClientRect())\n                console.log(document.getElementById('box1').getBoundingClientRect())\n\n\n                setMousePosition({x:e.pageX,y:e.pageY})\n                let pos  = positionSlide;\n                pos[index]={\n                    x: e.pageX/10  ,\n                    y: e.pageY - (document.getElementById('prefix__rect1514').getBoundingClientRect().y + (document.getElementById('prefix__rect1514').getBoundingClientRect().height*0.5))}\n                setPositionSlide(pos)\n\n\n            }*/\n\n        }\n    }\n    async function makeResponse ( id,answer)  {\n        if (typeof window !== \"undefined\"){\n            const token = localStorage.getItem(\"token\")\n            setLoadingResp(true)\n            axios.post(URL + '/api/answer/question',\n                {id,answer},{\n                    headers: {\n                        'Authorization': 'Bearer ' + token\n                    }\n                }\n\n            ).then((result) =>\n            {\n\n                setLoadingResp(false)\n                setVerif(result.data.data.answer.is_true)\n                setLoadingResp(false)\n\n                if(result.data.data.running_session !== undefined){\n                    let test = session.session.session_steps[3].question_true === 9 && result.data.data.running_session.session_steps[3].question_true === 10\n                    if(test === false){\n                        updateSession(result.data.data)\n                    }\n                    else{\n                        if(result.data.data.running_session.question_done === 50){\n                            updateSession({running_session: localSession})\n                            router.push('/win').then((r)=>{})\n                        }\n                        else{\n                            setLocalSession(result.data.data.running_session)\n                            if(!closeOnEndStep){\n                                setIsModalEndStep(true);\n                                setCloseOnEndStep(!closeOnEndStep)\n                            }\n                            else{\n                                setIsModalEndStep(false)\n                                updateSession({running_session: localSession})\n\n                            }\n\n                        }\n\n                    }\n\n                    let tab = [];\n                    result.data.data.running_session.session_steps[3].session_step_backgrounds[0].tool_session_answers.forEach((el)=>{\n                        if(el.is_true !== true){\n                            allImage.forEach((im) => {\n                                if(im.name === el.tool.name){\n                                    tab.push({name:el.tool.name,file: im.file})\n                                }\n                            })\n\n                        }\n\n                    })\n\n\n                    if(tab.length>=4){\n                        setSlide1(tab[0].file)\n                        setSlide2(tab[1].file)\n                        setSlide3(tab[2].file)\n                        setSlide4(tab[3].file)\n                    }\n                    else{\n                        if(tab.length === 3){\n                            setSlide1(tab[0].file)\n                            setSlide2(tab[1].file)\n                            setSlide3(tab[2].file)\n                            setSlide4(\"\")\n                        }\n\n                        if(tab.length === 2){\n                            setSlide1(tab[0].file)\n                            setSlide2(tab[1].file)\n                            setSlide3(\"\")\n                            setSlide4(\"\")\n                        }\n\n                        if(tab.length === 1){\n                            setSlide1(tab[0].file)\n                            setSlide2(\"\")\n                            setSlide3(\"\")\n                            setSlide4(\"\")\n                        }\n                        if(tab.length === 0){\n                            setSlide1(\"\")\n                            setSlide2(\"\")\n                            setSlide3(\"\")\n                            setSlide4(\"\")\n                        }\n                    }\n\n                    setArrayImage(tab)\n                }\n\n            }).\n            catch(function (error) {\n                setLoadingResp(false)\n                if (error.response) {\n                    //setLoading(false)\n                    message.warning(error.response.data.message)\n                    // The request was made and the server responded with a status code\n                    // that falls out of the range of 2xx\n                    if(error.response.data.data!== undefined &&  error.response.data.data.code !== undefined  && error.response.data.data.code !== null){\n                        switch (error.response.data.data.code){\n                            case 'no_running_session':\n                                setIsModalVisible(false)\n                                updateSession({running_session: null})\n                                break;\n                            case 'session_ended':\n                               updateSession(error.response.data.data)\n                                if(error.response.data.data.running_session.question_done < error.response.data.data.running_session.question_total ){\n                                    router.push('/lost').then((r)=>{})\n                                }\n                                else{\n                                    router.push('/win').then((r)=>{})\n                                }\n                                break;\n                            case 'question_already_done':\n                                if(session.session.question_done === 50){\n                                    router.push('/win').then((r)=>{})\n                                }\n                                else{\n                                    if (typeof window !== \"undefined\"){\n                                        window.location.reload()\n                                    }\n                                }\n                                break;\n                            case 'remaining_time':\n                                break;\n                            default:\n                                break;\n\n                        }\n                    }\n\n                } else if (error.request) {\n                    console.log(error.request)\n                } else {\n                    console.log('Error', error.message)\n                }\n            });\n        }\n\n    }\n    const stopDrag = (e,data) => {\n        setTimeout(()=>{\n            if(!loadingResp){\n                setOnmove(false);\n                setCarAxis('both')\n                setPositionSlide([{x: 0, y: 0},{x: 0, y: 0},{x: 0, y: 0},{x: 0, y: 0}])\n            }\n        },0);\n\n\n\n        //console.log(question);\n        // console.log(e);\n        //console.log(data);\n    }\n\n    const updatePosition = (e, ui, index) => {\n        let pos  = [{x: 0, y: 0},{x: 0, y: 0},{x: 0, y: 0},{x: 0, y: 0}];\n        pos[index]={x: positionSlide[index].x + ui.deltaX, y: positionSlide[index].y + ui.deltaY }\n        setPositionSlide(pos)\n    };\n    const ToolOverUp = (e,tag) => {\n        if(question !== null){\n            setLoadingResp(true)\n            makeResponse(question.id,tag)\n            console.log(question.id)\n\n        }\n    }\n\n\n\n    if(session && session.session){\n        return (\n            <>\n                <div style={{width:'100vw',height: '100vh' ,background: 'rgb(244 203 110)'}} >\n\n                    <Modal closable={false} footer={null} visible={isModalChrono}  onCancel={handleCancelChrono} >\n                        <div     className=\"  flex itemcenter justcenter column\" style={{height:'80vh'}}\n                        >\n\n\n                            <div  className=\"w100 flex column itemcenter justcenter cursor\" onClick={handleCancel}>\n\n                                <div style={{backgroundImage:`url(${chrono})`,backgroundSize:'cover',width:'209px',height:'251px' }} className=\"flex itemcenter justcenter\">\n<span style={{marginTop:45,fontSize:35}}>\n<Countdown date={dateNow*1000 + (session.session?.should_end_date - dateNow)*1000} renderer={renderer}  />\n</span>\n                                </div>\n\n\n\n                                <div className=\"card-auth hauto w50 bgwhite u-mar-top-l u-pad-s\n                     \" >\n                                    <h1 style={{fontSize:'18px'}} className=\"center\">\n                                        Il te reste\n                                        <span style={{fontSize:18,marginRight:5}}>\n<Countdown date={dateNow*1000 + (session.session?.should_end_date - dateNow)*1000} renderer={renderer}  />\n</span>\n                                        minutes pour trouver toutes les bouées\n\n                                    </h1>\n\n                                </div>\n\n\n\n\n                            </div>\n\n\n\n\n\n\n                        </div>\n                    </Modal>\n\n                    <Modal closable={false} footer={null} visible={isModalEndStep}  onCancel={handleCancel} >\n\n\n                        <div className=\"login-form card-auth hauto column  w100 bgwhite  rel flex u-pad-m rad8\">\n\n                            <div className=\"w100 flex column itemcenter justcenter flex\">\n\n\n                                <img src={vistaplage} className=\"w60\" />\n\n\n\n\n                                <span  className=\"green fs18 center\">\n\n\nBRAVO\n\n</span>\n\n                                <span className=\"fs20 center\" > Tu as répondu juste à toutes les questions <br/>\n\ndans <span style={{fontWeight: 'bold'}}>{session.session?.session_steps[3]?.step.name}</span></span>\n\n\n\n\n                            </div>\n\n\n                            <img src={etoile} className=\"starwin\"  />\n\n                        </div>\n\n\n\n                    </Modal>\n\n\n                    <svg\n                        onMouseMove={(e)=>onMouseMove(e)}\n\n\n                        width=\"100%\"\n                        height=\"100%\"\n\n                        viewBox=\"0 0 320 270.93\"\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n                    >\n                        <defs id=\"prefix__defs2722\">\n                            <style id=\"style2786\">\n                                {\n                                    \".prefix__cls-2{fill:#dcefec}.prefix__cls-3{fill:#a7d6d3}.prefix__cls-4{fill:#6db3b1}.prefix__cls-5{fill:#fff}.prefix__cls-8{fill:#eaac3d}.prefix__cls-110,.prefix__cls-111,.prefix__cls-113,.prefix__cls-14,.prefix__cls-15,.prefix__cls-25,.prefix__cls-42,.prefix__cls-43,.prefix__cls-49,.prefix__cls-9{fill:none}.prefix__cls-9{stroke:#eaac3d;stroke-width:6.08px}.prefix__cls-110,.prefix__cls-111,.prefix__cls-113,.prefix__cls-133,.prefix__cls-15,.prefix__cls-25,.prefix__cls-42,.prefix__cls-43,.prefix__cls-49,.prefix__cls-9{stroke-miterlimit:10}.prefix__cls-10,.prefix__cls-11{fill:#c08354}.prefix__cls-11,.prefix__cls-116,.prefix__cls-24,.prefix__cls-95{mix-blend-mode:multiply}.prefix__cls-12{fill:#444}.prefix__cls-13{fill:#707070}.prefix__cls-14{stroke:#707070;stroke-width:4.55px}.prefix__cls-14,.prefix__cls-25,.prefix__cls-42{stroke-linecap:round}.prefix__cls-14{stroke-linejoin:round}.prefix__cls-15{stroke:#fff;stroke-width:4.56px}.prefix__cls-17{fill:#771a10}.prefix__cls-18{fill:#c13e29}.prefix__cls-19{fill:#5580d7}.prefix__cls-22{fill:#b56938}.prefix__cls-23,.prefix__cls-24{fill:#4f63ac}.prefix__cls-25{stroke:#1c1c1c;stroke-width:4.81px}.prefix__cls-26{fill:#1c1c1c}.prefix__cls-27{fill:#262626}.prefix__cls-28{fill:#3c3c3b}.prefix__cls-29{fill:#1e1e1e}.prefix__cls-30{fill:#ffda3e}.prefix__cls-31{fill:#efc825}.prefix__cls-33{fill:#424242}.prefix__cls-34{fill:#2b2b2b;opacity:.24}.prefix__cls-35{fill:#161616}.prefix__cls-36{fill:#727272}.prefix__cls-37{fill:#f4ebdd}.prefix__cls-38{fill:#7c7c7c}.prefix__cls-39{fill:#2d2d2d}.prefix__cls-41{fill:#7f7f7f}.prefix__cls-42{stroke:#ffec9c;stroke-width:3.84px}.prefix__cls-43{stroke:#4c4c4c;stroke-width:3.2px;opacity:.26}.prefix__cls-45{fill:#595959}.prefix__cls-46{fill:#971506}.prefix__cls-49{stroke-width:2.32px;stroke:#292527}.prefix__cls-58{fill:#353535}.prefix__cls-64{fill:#eaac2c}.prefix__cls-65{fill:#fdd835}.prefix__cls-68{fill:#c23d20}.prefix__cls-71{fill:#68625e}.prefix__cls-72{fill:#514c48}.prefix__cls-73{fill:#ddd5ce}.prefix__cls-75{fill:#f4d47d}.prefix__cls-76{fill:#eab853}.prefix__cls-77{fill:#3a3532}.prefix__cls-78{fill:#726b68}.prefix__cls-79{fill:#ce9130}.prefix__cls-83{fill:#f4e3bd}.prefix__cls-84{fill:#efc76c}.prefix__cls-91{fill:#bfb8b4}.prefix__cls-96{fill:#e7d2bb}.prefix__cls-95{fill:#f3cb6f}.prefix__cls-101{fill:#577cbc}.prefix__cls-103{fill:#666}.prefix__cls-104{fill:#ffd800}.prefix__cls-105{fill:#ffe97d}.prefix__cls-106{fill:#060606}.prefix__cls-107{fill:#232323}.prefix__cls-109{fill:#717171}.prefix__cls-110,.prefix__cls-111{stroke:#444}.prefix__cls-110{stroke-width:1.66px}.prefix__cls-111{stroke-width:2.07px}.prefix__cls-112,.prefix__cls-116{fill:#b2b2b2}.prefix__cls-113{stroke:#3c3c3b;stroke-width:.45px}.prefix__cls-114{fill:#ebd483}.prefix__cls-115,.prefix__cls-126{fill:#dad4ce}.prefix__cls-118{fill:#4a58ab}.prefix__cls-119{fill:#343d77}.prefix__cls-120{fill:#908c86}.prefix__cls-121,.prefix__cls-130{fill:#f6f6f6}.prefix__cls-121{opacity:.7}.prefix__cls-122{fill:#706f6f}.prefix__cls-123{fill:#1d1d1b}.prefix__cls-125{fill:#504d4a}.prefix__cls-126,.prefix__cls-127{opacity:.5}.prefix__cls-129{fill:#a7402d}.prefix__cls-133{fill:#cb8e53;stroke:#925f36;stroke-width:1.42px}\"\n                                }\n                            </style>\n                        </defs>\n                       \n                        <defs>\n                            <pattern\n                                id=\"timer\"\n                                width=\"1\"\n                                height=\"2\"\n                            >                             {/* <---- these attributes needed here */}\n                                <text x={20}\n                                      y={6} fontSize=\"5\" ><Countdown date={dateNow*1000 +  (session.session?.should_end_date - dateNow)*1000} renderer={renderer}  /></text>\n                            </pattern>\n                        </defs>\n                        <defs>\n                            <pattern\n                                id=\"spin\"\n                                width=\"5\"\n                                height=\"10\"\n                            >                             {/* <---- these attributes needed here */}\n                                <text x={5}\n                                      y={9} fontSize=\"10\" style={{strokeWidth: '0.5',stroke: 'white'}} ></text>\n                            </pattern>\n                        </defs>\n                    </svg>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                </div>\n\n            </>\n        );\n    }else{\n        return <EmptyData/>\n    }\n\n}\n"]},"metadata":{},"sourceType":"module"}