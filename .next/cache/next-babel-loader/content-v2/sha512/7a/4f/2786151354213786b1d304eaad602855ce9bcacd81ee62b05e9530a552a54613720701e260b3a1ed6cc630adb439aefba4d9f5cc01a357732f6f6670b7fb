{"ast":null,"code":"import _regeneratorRuntime from \"/Users/macbookpro/Projects/web/dipongo_app/node_modules/@babel/runtime/regenerator\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _asyncToGenerator from \"/Users/macbookpro/Projects/web/dipongo_app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { Layout } from 'antd';\nimport close from \"../public/assets/img/bouton-quitter.png\";\nimport axios from \"axios\";\nimport { URL } from \"../urlapi\";\nimport chrono from '../public/assets/chrono.png';\nimport continuer from '../public/assets/img/continuer.png';\nimport quitter from '../public/assets/img/quitter.png';\nimport visiter from '../public/assets/img/visiter.png';\nimport rejouer from '../public/assets/img/rejouer.png';\nimport julien from \"../public/assets/img/julien.png\";\nimport suivant from \"../public/assets/suivant.jpg\";\nimport Countdown from \"react-countdown\";\nimport { Spin, message, Modal, Progress } from 'antd';\nimport { LoadingOutlined } from '@ant-design/icons';\nimport { useAuth } from \"../store\";\nimport { useRouter } from \"next/router\";\n\nvar antIcon = /*#__PURE__*/_jsx(LoadingOutlined, {\n  style: {\n    fontSize: 40,\n    color: '#1d893c',\n    marginTop: 30\n  },\n  spin: true\n});\n\nvar Content = Layout.Content;\nexport default function Onboarding() {\n  var _useAuth = useAuth(),\n      session = _useAuth.session,\n      updateSession = _useAuth.updateSession,\n      deleteSession = _useAuth.deleteSession;\n\n  var router = useRouter();\n\n  var _useState = useState(false),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = useState(false),\n      isModalVisible = _useState2[0],\n      setIsModalVisible = _useState2[1];\n\n  var _useState3 = useState(false),\n      isClose = _useState3[0],\n      setIsClose = _useState3[1];\n\n  var _useState4 = useState(false),\n      isReplay = _useState4[0],\n      setIsReplay = _useState4[1];\n\n  var _useState5 = useState(true),\n      showStars = _useState5[0],\n      setShowStars = _useState5[1];\n\n  var _useState6 = useState(null),\n      localSession = _useState6[0],\n      setLocalSession = _useState6[1];\n\n  var _useState7 = useState(false),\n      isMounted = _useState7[0],\n      setIsMounted = _useState7[1];\n\n  useEffect(function () {\n    setIsMounted(true);\n  }, []);\n\n  var handleCancel = function handleCancel() {\n    setIsModalVisible(false);\n    setIsClose(false);\n    setIsReplay(false);\n    setShowStars(true);\n  };\n\n  var logout = function logout() {\n    deleteSession();\n  };\n\n  function replayGame() {\n    return _replayGame.apply(this, arguments);\n  }\n\n  function _replayGame() {\n    _replayGame = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var token;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n\n              if (true) {\n                token = localStorage.getItem(\"token\");\n                axios.get(URL + '/api/start/game', {\n                  headers: {\n                    'Authorization': 'Bearer ' + token\n                  }\n                }).then(function (result) {\n                  updateSession(result.data.data);\n                  router.push(\"/roadmap\").then(function (res) {\n                    console.log(res);\n                  });\n                  setLoading(false);\n                })[\"catch\"](function (error) {\n                  setLoading(false);\n\n                  if (e.response) {\n                    message.warning(e.response.data.message);\n                  } else {\n                    message.warning('Erreur connexion!');\n                  }\n                });\n              }\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _replayGame.apply(this, arguments);\n  }\n\n  useEffect(function () {\n    if (true) {\n      var audioEl = document.getElementsByClassName(\"audio-element\")[0];\n      audioEl.play();\n      var token = localStorage.getItem(\"token\");\n      axios.get(URL + '/api/user/info', {\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      }).then(function (result) {\n        if (result.data.data.running_session !== undefined && result.data.data.running_session !== null) {\n          if (result.data.data.running_session.question_done === 50) {\n            router.push('/win').then(function (res) {\n              console.log(res);\n            });\n          }\n        }\n      })[\"catch\"](function (error) {\n        console.log('lost');\n      });\n    }\n  }, []);\n  var renderer = useCallback(function (_ref) {\n    var minutes = _ref.minutes,\n        seconds = _ref.seconds,\n        completed = _ref.completed;\n\n    if (completed) {\n      // Render a complete state\n      router.push('/lost').then(function (res) {\n        console.log(res);\n      }).then(function (res) {\n        console.log(res);\n      });\n      return null;\n    } else {\n      // Render a countdown\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [minutes < 10 ? '0' : '', \" \", minutes, \":\", seconds < 10 ? '0' : '', seconds]\n      });\n    }\n  }, []);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    style: {\n      width: '100vw',\n      height: '100vh',\n      backgroundColor: '#f4cb6e',\n      position: 'relative'\n    },\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      children: /*#__PURE__*/_jsx(\"audio\", {\n        className: \"audio-element\",\n        children: /*#__PURE__*/_jsx(\"source\", {\n          src: \"../wrong.mp3\"\n        })\n      })\n    }), /*#__PURE__*/_jsx(Modal, {\n      closable: false,\n      footer: null,\n      visible: isReplay,\n      onCancel: handleCancel,\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"  flex itemcenter justcenter column\",\n        style: {\n          height: '80vh'\n        },\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"w100 flex itemcenter justcenter cursor\",\n          onClick: replayGame,\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: rejouer,\n            className: \"w50\",\n            style: {\n              marginTop: 20\n            }\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"w100 flex itemcenter justcenter cursor u-mar-top-xl\",\n          onClick: logout,\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: visiter,\n            className: \"w40\"\n          })\n        })]\n      })\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"lost-image-text w100 u-pad-horizontal-m justcenter\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"flex\",\n        style: {\n          alignItems: 'flex-end',\n          zIndex: 1\n        },\n        children: /*#__PURE__*/_jsx(\"img\", {\n          src: julien,\n          className: \"julien\",\n          style: {\n            display: showStars ? 'block' : 'none'\n          }\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"card-auth card-text-onboard  bgwhite u-pad-s u-pad-left-xl \",\n        children: [/*#__PURE__*/_jsx(\"h1\", {\n          className: \"onboarding-text\",\n          children: \"Le temps est \\xE9coul\\xE9, les premiers baigneurs arrivent et tu n'as pas r\\xE9ussis la formation. Nous devrons faire sans toi. Mais si cela te dit de retenter ta chance je suis partant !\"\n        }), /*#__PURE__*/_jsx(\"span\", {\n          className: \"cursor next-board\",\n          onClick: function onClick() {\n            setIsReplay(true);\n            setShowStars(false);\n          },\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: suivant,\n            height: \"85\",\n            width: \"100\"\n          })\n        })]\n      })]\n    }), /*#__PURE__*/_jsx(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n      width: \"100%\",\n      height: \"100%\",\n      version: \"1.1\",\n      viewBox: \"0 0 1280 1024\",\n      children: /*#__PURE__*/_jsxs(\"g\", {\n        children: [/*#__PURE__*/_jsx(\"image\", {\n          width: \"100%\",\n          height: \"100%\",\n          opacity: \"1\",\n          preserveAspectRatio: \"none\",\n          xlinkHref: \"../../map_no_chrono.png\"\n        }), /*#__PURE__*/_jsx(\"path\", {\n          onClick: function onClick() {\n            return setIsModalVisible(true);\n          },\n          className: \"cursor\",\n          fill: \"transparent\",\n          stroke: \"#000\",\n          strokeLinecap: \"butt\",\n          strokeLinejoin: \"miter\",\n          strokeOpacity: \"1\",\n          strokeWidth: \"1\",\n          d: \"M29.52 182.66l1.846-162.365h134.688l1.845 164.21z\",\n          opacity: \"0\"\n        }), /*#__PURE__*/_jsx(\"path\", {\n          fill: \"url(#timer)\",\n          stroke: \"#000\",\n          strokeLinecap: \"butt\",\n          strokeLinejoin: \"miter\",\n          strokeOpacity: \"0\",\n          strokeWidth: \"1\",\n          d: \"M1105.182 876.396v36.901h105.168l-3.69-40.59z\",\n          opacity: \"1\"\n        }), /*#__PURE__*/_jsx(\"path\", {\n          onClick: function onClick() {\n            return setIsClose(true);\n          },\n          className: \"cursor\",\n          fill: \"transparent\",\n          stroke: \"#000\",\n          strokeLinecap: \"butt\",\n          strokeLinejoin: \"miter\",\n          strokeOpacity: \"1\",\n          strokeWidth: \"1\",\n          d: \"M1095.957 27.676c5.535 118.083 5.535 119.928 5.535 119.928l86.717 9.225 70.112-18.45-12.916-118.084z\",\n          opacity: \"0\"\n        }), /*#__PURE__*/_jsx(\"image\", {\n          style: {\n            display: showStars ? 'block' : 'none'\n          },\n          className: \"cursor\",\n          width: \"142.431\",\n          height: \"139.331\",\n          x: \"291.935\",\n          y: \"751.147\",\n          preserveAspectRatio: \"none\",\n          xlinkHref: \"../../vide.png\"\n        }), /*#__PURE__*/_jsx(\"image\", {\n          style: {\n            display: showStars ? 'block' : 'none'\n          },\n          className: \"cursor\",\n          width: \"142.431\",\n          height: \"139.331\",\n          x: \"931.935\",\n          y: \"471.711\",\n          preserveAspectRatio: \"none\",\n          xlinkHref: \"../../vide.png\"\n        }), /*#__PURE__*/_jsx(\"image\", {\n          style: {\n            display: showStars ? 'block' : 'none'\n          },\n          className: \"cursor\",\n          width: \"142.431\",\n          height: \"139.331\",\n          x: \"416.329\",\n          y: \"246.359\",\n          preserveAspectRatio: \"none\",\n          xlinkHref: \"../../vide.png\"\n        }), /*#__PURE__*/_jsx(\"image\", {\n          style: {\n            display: showStars ? 'block' : 'none'\n          },\n          width: \"142.431\",\n          height: \"139.331\",\n          x: \"769.681\",\n          y: \"93.119\",\n          opacity: \"1\",\n          preserveAspectRatio: \"none\",\n          xlinkHref: \"../../vide.png\"\n        })]\n      })\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}