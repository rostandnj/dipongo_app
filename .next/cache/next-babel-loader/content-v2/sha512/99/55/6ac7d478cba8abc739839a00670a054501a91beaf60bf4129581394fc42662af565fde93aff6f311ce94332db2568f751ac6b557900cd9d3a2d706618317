{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport React, { useState, useEffect } from 'react';\nimport axios from \"axios\";\nimport { URL } from \"../urlapi\";\nimport { Layout, Modal, Progress } from 'antd';\nimport chrono from '../public/assets/chrono.png';\nimport continuer from '../public/assets/img/continuer.png';\nimport quitter from '../public/assets/img/quitter.png';\nimport Countdown from \"react-countdown\";\nimport { useAuth } from \"../store\";\nimport { useRouter } from \"next/router\";\nimport EmptyData from \"../components/EmptyData\";\nconst {\n  Content\n} = Layout;\nimport mapRoad from '../public/map.png';\nexport default function Home() {\n  const {\n    session,\n    updateSession,\n    deleteSession\n  } = useAuth();\n  const router = useRouter();\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  const {\n    0: isModalVisible,\n    1: setIsModalVisible\n  } = useState(false);\n  const {\n    0: isClose,\n    1: setIsClose\n  } = useState(false);\n  const {\n    0: dateNow,\n    1: setDateNow\n  } = useState(Date.parse(Date()) / 1000);\n  const {\n    0: isModalChrono,\n    1: setIsModalChrono\n  } = useState(false);\n  const {\n    0: isMounted,\n    1: setIsMounted\n  } = useState(false);\n  useEffect(() => {\n    setIsMounted(true);\n  }, []);\n\n  const handleCancel = () => {\n    setIsModalVisible(false);\n    setIsModalChrono(false);\n    setIsClose(false);\n  };\n\n  const logout = () => {\n    deleteSession();\n  };\n\n  useEffect(() => {\n    if (false) {\n      setLoading(true);\n      const token = localStorage.getItem(\"token\");\n      axios.get(URL + '/api/user/info', {\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      }).then(result => {\n        setLoading(false);\n        updateSession(result.data.data);\n      }).catch(error => {\n        setLoading(false);\n        console.log(error);\n      });\n    }\n  }, []);\n\n  const goodAnswer = step => {\n    if (session.session !== null && session.session !== undefined) {\n      let st = session.session.session_steps[parseInt(step, 10)];\n\n      if (st.question_true === 0) {\n        return \"../../vide.png\";\n      } else {\n        if (st.nb_question === 15) {\n          if (st.question_true === 15) {\n            return \"../../pleine.png\";\n          } else {\n            return \"../../\" + st.question_true.toString() + \"-15.png\";\n          }\n        } else {\n          if (st.question_true === 10) {\n            return \"../../pleine.png\";\n          } else {\n            return \"../../\" + st.question_true.toString() + \"-10.png\";\n          }\n        }\n      }\n    } else {\n      return \"../../vide.png\";\n    }\n  };\n\n  const renderer = ({\n    minutes,\n    seconds,\n    completed\n  }) => {\n    if (completed) {\n      router.push('/lost').then(res => {});\n      return null;\n    } else {\n      if (minutes === 25 && seconds === 59) {\n        setIsModalVisible(false);\n        setIsModalChrono(true);\n      }\n\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [minutes < 10 ? '0' : '', \" \", minutes, \":\", seconds < 10 ? '0' : '', seconds]\n      });\n    }\n  };\n\n  if (session && session.session) {\n    var _session$session, _session$session2, _session$session3, _session$session4, _session$session5, _session$session6, _session$session7, _session$session8, _session$session9, _session$session10, _session$session11, _session$session12, _session$session13, _session$session14, _session$session15, _session$session16, _session$session17, _session$session18, _session$session19, _session$session20, _session$session21, _session$session22, _session$session23;\n\n    return /*#__PURE__*/_jsx(_Fragment, {\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        style: {\n          width: '100vw',\n          height: '100vh',\n          backgroundColor: '#f4cb6e'\n        },\n        children: [/*#__PURE__*/_jsx(Modal, {\n          closable: false,\n          footer: null,\n          visible: isClose,\n          onCancel: handleCancel,\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"  flex itemcenter justcenter column\",\n            style: {\n              height: '80vh'\n            },\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"w100 flex itemcenter justcenter cursor\",\n              onClick: handleCancel,\n              children: /*#__PURE__*/_jsx(\"img\", {\n                src: continuer,\n                className: \"w35\"\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"w100 flex itemcenter justcenter cursor\",\n              onClick: logout,\n              children: /*#__PURE__*/_jsx(\"img\", {\n                src: quitter,\n                className: \"w25\",\n                style: {\n                  marginTop: 20\n                }\n              })\n            })]\n          })\n        }), /*#__PURE__*/_jsx(Modal, {\n          closable: false,\n          footer: null,\n          visible: isModalVisible,\n          onCancel: handleCancel,\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"login-form card-auth hauto column  w100 bgwhite   flex u-pad-s rad8\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"w100 flex column itemcenter justcenter flex\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                style: {\n                  marginTop: -75,\n                  backgroundImage: `url(${chrono})`,\n                  backgroundSize: 'cover',\n                  width: '90px',\n                  height: '108px'\n                },\n                className: \"flex itemcenter justcenter\",\n                children: /*#__PURE__*/_jsx(\"span\", {\n                  style: {\n                    marginTop: 18\n                  },\n                  children: /*#__PURE__*/_jsx(Countdown, {\n                    date: dateNow * 1000 + (((_session$session = session.session) === null || _session$session === void 0 ? void 0 : _session$session.should_end_date) - dateNow) * 1000,\n                    renderer: renderer\n                  })\n                })\n              }), /*#__PURE__*/_jsxs(\"h1\", {\n                className: \"nomar\",\n                children: [\" \", JSON.parse(localStorage.getItem('user')).name, \"  \"]\n              }), /*#__PURE__*/_jsx(\"span\", {\n                className: \"\",\n                style: {\n                  color: '#ddd',\n                  fontSize: 15\n                },\n                children: \"Ma fiche secouriste\"\n              }), /*#__PURE__*/_jsxs(\"span\", {\n                className: \"av-heavy\",\n                style: {\n                  fontSize: 15\n                },\n                children: [(_session$session2 = session.session) === null || _session$session2 === void 0 ? void 0 : _session$session2.session_steps.reduce((accumulateur, valeurCourante) => accumulateur + valeurCourante.question_true, 0), \"/\", (_session$session3 = session.session) === null || _session$session3 === void 0 ? void 0 : _session$session3.session_steps.reduce((accumulateur, valeurCourante) => accumulateur + valeurCourante.nb_question, 0)]\n              }), /*#__PURE__*/_jsx(\"span\", {\n                style: {\n                  textAlign: 'center',\n                  color: '#333',\n                  fontSize: 14\n                },\n                className: \"u-mar-top-xs u-mar-bottom-m\",\n                children: (_session$session4 = session.session) === null || _session$session4 === void 0 ? void 0 : _session$session4.message\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex u-mar-top-xxs itemcenter justcenter\",\n              children: [/*#__PURE__*/_jsx(\"span\", {\n                style: {\n                  color: '#78b78a',\n                  fontSize: 16,\n                  marginRight: 5,\n                  width: 200,\n                  textAlign: 'left'\n                },\n                children: \"Environement\"\n              }), /*#__PURE__*/_jsx(Progress, {\n                percent: ((_session$session5 = session.session) === null || _session$session5 === void 0 ? void 0 : _session$session5.session_steps[0].question_true) * 100 / ((_session$session6 = session.session) === null || _session$session6 === void 0 ? void 0 : _session$session6.session_steps[0].nb_question),\n                title: 'ok',\n                status: \"active\",\n                className: \"green\",\n                showInfo: false\n              }), /*#__PURE__*/_jsxs(\"span\", {\n                style: {\n                  color: '#333',\n                  fontSize: 14,\n                  marginLeft: 5,\n                  width: '60px'\n                },\n                className: \"av-heavy\",\n                children: [(_session$session7 = session.session) === null || _session$session7 === void 0 ? void 0 : _session$session7.session_steps[0].question_true, \"/\", (_session$session8 = session.session) === null || _session$session8 === void 0 ? void 0 : _session$session8.session_steps[0].nb_question]\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex  itemcenter justcenter\",\n              style: {\n                marginTop: '22px'\n              },\n              children: [/*#__PURE__*/_jsx(\"span\", {\n                style: {\n                  color: '#d15d43',\n                  fontSize: 16,\n                  marginRight: 5,\n                  width: 200,\n                  textAlign: 'left'\n                },\n                children: \"Secourisme\"\n              }), /*#__PURE__*/_jsx(Progress, {\n                percent: ((_session$session9 = session.session) === null || _session$session9 === void 0 ? void 0 : _session$session9.session_steps[2].question_true) * 100 / ((_session$session10 = session.session) === null || _session$session10 === void 0 ? void 0 : _session$session10.session_steps[2].nb_question),\n                title: 'ok',\n                status: \"active\",\n                className: \"red\",\n                showInfo: false\n              }), /*#__PURE__*/_jsxs(\"span\", {\n                style: {\n                  color: '#333',\n                  fontSize: 14,\n                  marginLeft: 5,\n                  width: '60px'\n                },\n                className: \"av-heavy\",\n                children: [(_session$session11 = session.session) === null || _session$session11 === void 0 ? void 0 : _session$session11.session_steps[2].question_true, \"/\", (_session$session12 = session.session) === null || _session$session12 === void 0 ? void 0 : _session$session12.session_steps[2].nb_question]\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex  itemcenter justcenter\",\n              style: {\n                marginTop: '22px'\n              },\n              children: [/*#__PURE__*/_jsx(\"span\", {\n                style: {\n                  color: '#48a4a3',\n                  fontSize: 16,\n                  marginRight: 5,\n                  width: 200,\n                  textAlign: 'left'\n                },\n                children: \"Milieu aquatique\"\n              }), /*#__PURE__*/_jsx(Progress, {\n                percent: ((_session$session13 = session.session) === null || _session$session13 === void 0 ? void 0 : _session$session13.session_steps[1].question_true) * 100 / ((_session$session14 = session.session) === null || _session$session14 === void 0 ? void 0 : _session$session14.session_steps[1].nb_question),\n                title: 'ok',\n                status: \"active\",\n                className: \"blue\",\n                showInfo: false\n              }), /*#__PURE__*/_jsxs(\"span\", {\n                style: {\n                  color: '#333',\n                  fontSize: 14,\n                  marginLeft: 5,\n                  width: '60px'\n                },\n                className: \"av-heavy\",\n                children: [(_session$session15 = session.session) === null || _session$session15 === void 0 ? void 0 : _session$session15.session_steps[1].question_true, \"/\", (_session$session16 = session.session) === null || _session$session16 === void 0 ? void 0 : _session$session16.session_steps[1].nb_question]\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex  itemcenter justcenter\",\n              style: {\n                marginTop: '22px'\n              },\n              children: [/*#__PURE__*/_jsx(\"span\", {\n                style: {\n                  color: '#faba48',\n                  fontSize: 16,\n                  marginRight: 5,\n                  width: 200,\n                  textAlign: 'left'\n                },\n                children: \"Replacer les \\xE9lements\"\n              }), /*#__PURE__*/_jsx(Progress, {\n                percent: ((_session$session17 = session.session) === null || _session$session17 === void 0 ? void 0 : _session$session17.session_steps[3].question_true) * 100 / ((_session$session18 = session.session) === null || _session$session18 === void 0 ? void 0 : _session$session18.session_steps[3].nb_question),\n                title: 'ok',\n                status: \"active\",\n                className: \"orange\",\n                showInfo: false\n              }), /*#__PURE__*/_jsxs(\"span\", {\n                style: {\n                  color: '#333',\n                  fontSize: 14,\n                  marginLeft: 5,\n                  width: '60px'\n                },\n                className: \"av-heavy\",\n                children: [(_session$session19 = session.session) === null || _session$session19 === void 0 ? void 0 : _session$session19.session_steps[3].question_true, \"/\", (_session$session20 = session.session) === null || _session$session20 === void 0 ? void 0 : _session$session20.session_steps[3].nb_question]\n              })]\n            })]\n          })\n        }), /*#__PURE__*/_jsx(Modal, {\n          closable: false,\n          footer: null,\n          visible: isModalChrono,\n          onCancel: handleCancel,\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"  flex itemcenter justcenter column\",\n            style: {\n              height: '80vh'\n            },\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"w100 flex column itemcenter justcenter cursor\",\n              onClick: handleCancel,\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                style: {\n                  backgroundImage: `url(${chrono})`,\n                  backgroundSize: 'cover',\n                  width: '209px',\n                  height: '251px'\n                },\n                className: \"flex itemcenter justcenter\",\n                children: /*#__PURE__*/_jsx(\"span\", {\n                  style: {\n                    marginTop: 45,\n                    fontSize: 35\n                  },\n                  children: /*#__PURE__*/_jsx(Countdown, {\n                    date: dateNow * 1000 + (((_session$session21 = session.session) === null || _session$session21 === void 0 ? void 0 : _session$session21.should_end_date) - dateNow) * 1000,\n                    renderer: renderer\n                  })\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"card-auth hauto w50 bgwhite u-mar-top-l u-pad-s \",\n                children: /*#__PURE__*/_jsxs(\"h1\", {\n                  style: {\n                    fontSize: '18px'\n                  },\n                  className: \"center\",\n                  children: [\"Il te reste\", /*#__PURE__*/_jsx(\"span\", {\n                    style: {\n                      fontSize: 18,\n                      marginRight: 5\n                    },\n                    children: /*#__PURE__*/_jsx(Countdown, {\n                      date: dateNow * 1000 + (((_session$session22 = session.session) === null || _session$session22 === void 0 ? void 0 : _session$session22.should_end_date) - dateNow) * 1000,\n                      renderer: renderer\n                    })\n                  }), \"minutes pour trouver toutes les bou\\xE9es\"]\n                })\n              })]\n            })\n          })\n        }), /*#__PURE__*/_jsxs(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n          width: \"100%\",\n          height: \"100%\",\n          version: \"1.1\",\n          viewBox: \"0 0 1280 1024\",\n          children: [/*#__PURE__*/_jsxs(\"g\", {\n            children: [/*#__PURE__*/_jsx(\"image\", {\n              width: \"100%\",\n              height: \"100%\",\n              opacity: \"1\",\n              preserveAspectRatio: \"none\",\n              xlinkHref: require(\"./../public/map.png\")\n            }), /*#__PURE__*/_jsx(\"path\", {\n              className: \"cursor\",\n              onClick: () => setIsModalVisible(true),\n              fill: \"transparent\",\n              stroke: \"#000\",\n              strokeLinecap: \"butt\",\n              strokeLinejoin: \"miter\",\n              strokeOpacity: \"1\",\n              strokeWidth: \"1\",\n              d: \"M29.52 182.66l1.846-162.365h134.688l1.845 164.21z\",\n              opacity: \"0\"\n            }), /*#__PURE__*/_jsx(\"path\", {\n              className: \"cursor\",\n              onClick: () => setIsModalChrono(true),\n              fill: \"url(#timer)\",\n              stroke: \"#000\",\n              strokeLinecap: \"butt\",\n              strokeLinejoin: \"miter\",\n              strokeOpacity: \"0\",\n              strokeWidth: \"1\",\n              d: \"M1105.182 876.396v36.901h105.168l-3.69-40.59z\",\n              opacity: \"1\"\n            }), /*#__PURE__*/_jsx(\"path\", {\n              className: \"cursor\",\n              onClick: () => setIsClose(true),\n              fill: \"transparent\",\n              stroke: \"#000\",\n              strokeLinecap: \"butt\",\n              strokeLinejoin: \"miter\",\n              strokeOpacity: \"1\",\n              strokeWidth: \"1\",\n              d: \"M1095.957 27.676c5.535 118.083 5.535 119.928 5.535 119.928l86.717 9.225 70.112-18.45-12.916-118.084z\",\n              opacity: \"0\"\n            }), /*#__PURE__*/_jsx(\"image\", {\n              width: \"142.431\",\n              height: \"139.331\",\n              x: \"291.935\",\n              y: \"751.147\",\n              preserveAspectRatio: \"none\",\n              href: goodAnswer(\"0\")\n            }), /*#__PURE__*/_jsx(\"image\", {\n              className: \"cursor\",\n              width: \"142.431\",\n              height: \"139.331\",\n              x: \"931.935\",\n              y: \"471.711\",\n              preserveAspectRatio: \"none\",\n              href: goodAnswer(\"2\")\n            }), /*#__PURE__*/_jsx(\"image\", {\n              className: \"cursor\",\n              width: \"142.431\",\n              height: \"139.331\",\n              x: \"416.329\",\n              y: \"246.359\",\n              preserveAspectRatio: \"none\",\n              href: goodAnswer(\"1\")\n            }), /*#__PURE__*/_jsx(\"image\", {\n              width: \"142.431\",\n              height: \"139.331\",\n              x: \"769.681\",\n              y: \"93.119\",\n              opacity: \"1\",\n              preserveAspectRatio: \"none\",\n              href: goodAnswer(\"3\")\n            })]\n          }), /*#__PURE__*/_jsx(\"path\", {\n            className: \"cursor\",\n            onClick: () => router.push('/environement').then(res => {}),\n            fill: \"transparent\",\n            d: \"M187.52 724.34l12.869 84.567 16.546 27.576 22.061 102.95 77.214 64.345 77.214 20.223 303.34-29.415-244.51-145.24-14.707-108.47-20.223-42.284-71.698-38.607-53.314 23.899z\"\n          }), /*#__PURE__*/_jsx(\"path\", {\n            className: \"cursor\",\n            onClick: () => router.push('/surveillance').then(res => {}),\n            fill: \"transparent\",\n            d: \"M248.19 536.82l18.384-270.25 95.598-108.47 136.04-27.576 55.153 40.445 9.192 108.47-84.567 64.345 29.415 209.58-102.95 47.799-49.637 7.354-62.506-27.576z\"\n          }), /*#__PURE__*/_jsx(\"path\", {\n            className: \"cursor\",\n            onClick: () => router.push('/secourisme').then(res => {}),\n            fill: \"transparent\",\n            d: \"M590.13 733.53l14.707-75.375 58.829 1.838 18.384-97.436 115.82-29.415 18.384-80.89 104.79-25.738-33.092 90.083 69.86-82.729 130.53 73.537 42.284 93.76-90.083 42.283-14.707 132.37-224.29 68.022z\"\n          }), /*#__PURE__*/_jsx(\"path\", {\n            className: \"cursor\",\n            onClick: () => router.push('/replacement').then(res => {}),\n            fill: \"transparent\",\n            d: \"M902.66 323.56l42.284-40.445 14.707-125.01 16.546-90.083V18.385L853.027.001l-60.668 40.445-1.838 77.214 29.415 150.75z\"\n          }), /*#__PURE__*/_jsx(\"defs\", {\n            children: /*#__PURE__*/_jsxs(\"pattern\", {\n              id: \"timer\",\n              patternUnits: \"userSpaceOnUse\",\n              width: \"100\",\n              height: \"80\",\n              children: [\"                             \", /*#__PURE__*/_jsx(\"text\", {\n                x: 30,\n                y: 25,\n                fontSize: \"22\",\n                children: /*#__PURE__*/_jsx(Countdown, {\n                  date: dateNow * 1000 + (((_session$session23 = session.session) === null || _session$session23 === void 0 ? void 0 : _session$session23.should_end_date) - dateNow) * 1000,\n                  renderer: renderer\n                })\n              })]\n            })\n          })]\n        })]\n      })\n    });\n  } else {\n    return /*#__PURE__*/_jsx(EmptyData, {});\n  }\n}","map":null,"metadata":{},"sourceType":"module"}