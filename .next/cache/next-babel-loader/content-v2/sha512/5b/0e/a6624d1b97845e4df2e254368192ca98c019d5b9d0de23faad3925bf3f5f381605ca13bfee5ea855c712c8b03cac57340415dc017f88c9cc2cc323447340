{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useEffect, useState } from 'react';\nimport { Form, Input, Button, Layout, message, Modal, Checkbox } from 'antd';\nimport axios from \"axios\";\nimport close from \"../../public/assets/img/bouton-quitter.png\";\nimport ok from \"../../public/assets/img/btn-ok-2.png\";\nimport { URL } from '../../urlapi';\nimport { Spin } from 'antd';\nimport { LoadingOutlined } from '@ant-design/icons';\nimport continuer from \"../../public/assets/img/continuer.png\";\nimport quitter from \"../../public/assets/img/quitter.png\";\nimport { useAuth } from \"../../store\";\nimport { useRouter } from \"next/router\";\n\nconst antIcon = /*#__PURE__*/_jsx(LoadingOutlined, {\n  style: {\n    fontSize: 40,\n    color: '#1d893c'\n  },\n  spin: true\n});\n\nconst {\n  Content\n} = Layout;\nexport default function Signup() {\n  const {\n    session,\n    updateSession,\n    deleteSession\n  } = useAuth();\n  const router = useRouter();\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: isModalVisible,\n    1: setIsModalVisible\n  } = useState(false);\n  const {\n    0: checkValue,\n    1: setCheckValue\n  } = useState(false);\n  useEffect(() => {\n    if (false) {\n      setLoading(true);\n      const token = localStorage.getItem(\"token\");\n      axios.get(URL + '/api/user/info', {\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      }).then(result => {\n        if (result.data.data.running_session === null) {\n          logout();\n        } else {\n          if (result.data.data.running_session.status === true && result.data.data.running_session.question_done === 50) {} else {\n            router.push('/roadmap').then(r => {});\n          }\n        }\n      }).catch(error => {\n        setLoading(false);\n        console.log('error');\n      });\n    }\n  }, []);\n  const [form] = Form.useForm();\n\n  const logout = () => {\n    deleteSession();\n  };\n\n  const handleCancel = () => {\n    setIsModalVisible(false);\n  };\n\n  const toggleChecked = () => {\n    setCheckValue(!checkValue);\n  };\n\n  const onChangeChecked = e => {\n    console.log('checked = ', e.target.checked);\n    setCheckValue(e.target.checked);\n  };\n\n  async function onSubmit(values) {\n    if (false) {\n      if (checkValue === false) {\n        message.warning(\"bien vouloir cocher\");\n      } else {\n        const token = localStorage.getItem(\"token\");\n        setLoading(true);\n        axios.post(URL + '/api/register/email', values, {\n          headers: {\n            'Authorization': 'Bearer ' + token\n          }\n        }).then(result => {\n          setLoading(false);\n          router.push(\"/win/end\").then(r => {}); //message.success(result.data.message)\n        }).catch(function (error) {\n          setLoading(false);\n\n          if (error.response) {\n            setLoading(false);\n            message.warning(error.response.data.message); // The request was made and the server responded with a status code\n            // that falls out of the range of 2xx\n          } else if (error.request) {\n            // The request was made but no response was received\n            // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n            // http.ClientRequest in node.js\n            console.log(error.request);\n          } else {\n            // Something happened in setting up the request that triggered an Error\n            console.log('Error', error.message);\n          }\n\n          console.log(error.config);\n        });\n      }\n    }\n  }\n\n  const onChecked = () => {\n    setCheckValue(checkValue);\n  };\n\n  return /*#__PURE__*/_jsxs(Layout, {\n    className: \"bgapp background-image-body\",\n    children: [/*#__PURE__*/_jsx(Modal, {\n      closable: false,\n      footer: null,\n      visible: isModalVisible,\n      onCancel: handleCancel,\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"  flex itemcenter justcenter column\",\n        style: {\n          height: '80vh'\n        },\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"w100 flex itemcenter justcenter cursor\",\n          onClick: handleCancel,\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: continuer,\n            className: \"w35\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"w100 flex itemcenter justcenter cursor\",\n          onClick: logout,\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: quitter,\n            className: \"w25\",\n            style: {\n              marginTop: 20\n            }\n          })\n        })]\n      })\n    }), /*#__PURE__*/_jsxs(\"section\", {\n      className: \"hv100 column flex itemcenter justcenter mask \",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"close\",\n        children: /*#__PURE__*/_jsx(\"img\", {\n          onClick: () => router.push(\"/win/end\").then(r => {}),\n          style: {\n            marginTop: '-10px'\n          },\n          src: close,\n          className: \"closeButton cursor\",\n          alt: \"close\"\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        style: {\n          maxHeight: '600px'\n        },\n        className: \"flex column w100   justcenter itemcenter\",\n        children: /*#__PURE__*/_jsxs(Form, {\n          name: \"normal_login\",\n          className: \"login-form card-auth column  w40 w90res bgwhite  alignitems justcenter flex u-pad-top-l rad8\",\n          size: \"large\",\n          initialValues: {\n            remember: true\n          },\n          onFinish: onSubmit,\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            style: {\n              textAlign: 'center',\n              fontWeight: 'bolder'\n            },\n            children: \"BRAVO !\"\n          }), /*#__PURE__*/_jsx(\"span\", {\n            style: {\n              fontSize: '13px',\n              paddingLeft: '20px',\n              paddingRight: '20px',\n              textAlign: 'justify'\n            },\n            children: \"Je t'invite \\xE0 passer une demi-journ\\xE9e au poste de secours le plus proche de chez toi. Pour cela remplis ce formulaire.\"\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"u-pad-horizontal-xxl \",\n            children: [/*#__PURE__*/_jsx(Form.Item, {\n              name: \"name\",\n              label: \"Nom\",\n              rules: [{\n                required: true,\n                message: 'Inserer un nom '\n              }],\n              className: \"u-mar-bottom-m column u-mar-top-s\",\n              children: /*#__PURE__*/_jsx(Input, {\n                className: \"u-mar-top-xs\"\n              })\n            }), /*#__PURE__*/_jsx(Form.Item, {\n              name: \"surname\",\n              label: \"Pr\\xE9nom\",\n              className: \"u-mar-bottom-m column u-mar-top-s\",\n              children: /*#__PURE__*/_jsx(Input, {\n                className: \"u-mar-top-xs\"\n              })\n            }), /*#__PURE__*/_jsx(Form.Item, {\n              name: \"email\",\n              label: \"email\",\n              rules: [{\n                type: \"email\",\n                required: true,\n                message: 'Inserer une adresse email valide'\n              }],\n              className: \"u-mar-bottom-xs column\",\n              children: /*#__PURE__*/_jsx(Input, {\n                type: \"email\",\n                className: \"u-mar-top-xs\"\n              })\n            }), /*#__PURE__*/_jsx(Form.Item, {\n              name: \"check_fill\",\n              children: /*#__PURE__*/_jsx(Checkbox, {\n                checked: checkValue,\n                className: \"fs10 \",\n                onChange: e => onChangeChecked(e),\n                children: /*#__PURE__*/_jsx(\"span\", {\n                  style: {\n                    fontSize: '11px'\n                  },\n                  children: \"J'accepte de recevoir un mail de G\\xE9n\\xE9ration Sauveteurs.\"\n                })\n              })\n            }), /*#__PURE__*/_jsx(Form.Item, {\n              className: \"w100 justcenter flex itemcenter u-mar-top-l\",\n              children: /*#__PURE__*/_jsx(\"div\", {\n                style: {\n                  paddingBottom: '20px'\n                },\n                className: \"w100 justcenter flex itemcenter\",\n                children: loading ? /*#__PURE__*/_jsx(Spin, {\n                  indicator: antIcon\n                }) : /*#__PURE__*/_jsx(Button, {\n                  htmlType: \"submit\",\n                  size: \"large\",\n                  style: {\n                    border: 0,\n                    padding: 0\n                  },\n                  children: /*#__PURE__*/_jsx(\"img\", {\n                    style: {\n                      pointerEvents: checkValue ? 'auto' : 'none'\n                    },\n                    style: {\n                      width: '80px',\n                      height: '50px'\n                    },\n                    src: ok\n                  })\n                })\n              })\n            })]\n          })]\n        })\n      })]\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}