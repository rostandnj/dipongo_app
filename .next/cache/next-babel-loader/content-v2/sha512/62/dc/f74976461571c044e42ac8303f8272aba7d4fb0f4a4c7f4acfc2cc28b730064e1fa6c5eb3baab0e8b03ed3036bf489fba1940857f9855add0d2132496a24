{"ast":null,"code":"import _regeneratorRuntime from \"/Users/macbookpro/Projects/web/dipongo_app/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/Users/macbookpro/Projects/web/dipongo_app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/Users/macbookpro/Projects/web/dipongo_app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/macbookpro/Projects/web/dipongo_app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/macbookpro/Projects/web/dipongo_app/pages/win/sendemail.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Form, Input, Button, Layout, message, Modal, Checkbox } from 'antd';\nimport axios from \"axios\";\nimport close from \"../../public/assets/img/bouton-quitter.png\";\nimport ok from \"../../public/assets/img/btn-ok-2.png\";\nimport { URL } from '../../urlapi';\nimport { Spin } from 'antd';\nimport { LoadingOutlined } from '@ant-design/icons';\nimport continuer from \"../../public/assets/img/continuer.png\";\nimport quitter from \"../../public/assets/img/quitter.png\";\nimport { useAuth } from \"../../store\";\nimport { useRouter } from \"next/router\";\n\nvar antIcon = /*#__PURE__*/_jsxDEV(LoadingOutlined, {\n  style: {\n    fontSize: 40,\n    color: '#1d893c'\n  },\n  spin: true\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 14,\n  columnNumber: 17\n}, this);\n\nvar Content = Layout.Content;\nexport default function Signup() {\n  _s();\n\n  var _jsxDEV2;\n\n  var _useAuth = useAuth(),\n      session = _useAuth.session,\n      updateSession = _useAuth.updateSession,\n      deleteSession = _useAuth.deleteSession;\n\n  var router = useRouter();\n\n  var _useState = useState(false),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = useState(false),\n      isModalVisible = _useState2[0],\n      setIsModalVisible = _useState2[1];\n\n  var _useState3 = useState(false),\n      checkValue = _useState3[0],\n      setCheckValue = _useState3[1];\n\n  useEffect(function () {\n    if (true) {\n      setLoading(true);\n      var token = localStorage.getItem(\"token\");\n      axios.get(URL + '/api/user/info', {\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      }).then(function (result) {\n        setLoading(false);\n\n        if (result.data.data.running_session.status === true && result.data.data.running_session.question_done === 50) {} else {\n          router.push('/roadmap').then(function (r) {});\n        }\n      })[\"catch\"](function (error) {\n        setLoading(false);\n        console.log('error');\n      });\n    }\n  }, []);\n\n  var _Form$useForm = Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var logout = function logout() {\n    deleteSession();\n  };\n\n  var handleCancel = function handleCancel() {\n    setIsModalVisible(false);\n  };\n\n  var toggleChecked = function toggleChecked() {\n    setCheckValue(!checkValue);\n  };\n\n  var onChangeChecked = function onChangeChecked(e) {\n    setCheckValue(e.target.checked);\n  };\n\n  function onSubmit(_x) {\n    return _onSubmit.apply(this, arguments);\n  }\n\n  function _onSubmit() {\n    _onSubmit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values) {\n      var token;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (true) {\n                token = localStorage.getItem(\"token\");\n                setLoading(true);\n                axios.post(URL + '/api/register/email', values, {\n                  headers: {\n                    'Authorization': 'Bearer ' + token\n                  }\n                }).then(function (result) {\n                  setLoading(false);\n                  router.push(\"/win/end\").then(function (r) {}); //message.success(result.data.message)\n                })[\"catch\"](function (error) {\n                  setLoading(false);\n\n                  if (error.response) {\n                    setLoading(false);\n                    message.warning(error.response.data.message); // The request was made and the server responded with a status code\n                    // that falls out of the range of 2xx\n                  } else if (error.request) {\n                    // The request was made but no response was received\n                    // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n                    // http.ClientRequest in node.js\n                    console.log(error.request);\n                  } else {\n                    // Something happened in setting up the request that triggered an Error\n                    console.log('Error', error.message);\n                  }\n\n                  console.log(error.config);\n                });\n              }\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _onSubmit.apply(this, arguments);\n  }\n\n  var onChecked = function onChecked() {\n    setCheckValue(checkValue);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    className: \"bgapp background-image-body\",\n    style: {\n      height: '100vh'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      closable: false,\n      footer: null,\n      visible: isModalVisible,\n      onCancel: handleCancel,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"  flex itemcenter justcenter column\",\n        style: {\n          height: '80vh'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w100 flex itemcenter justcenter cursor\",\n          onClick: handleCancel,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: continuer,\n            className: \"w35\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w100 flex itemcenter justcenter cursor\",\n          onClick: logout,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: quitter,\n            className: \"w25\",\n            style: {\n              marginTop: 20\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \" column flex itemcenter justcenter mask \",\n      style: {\n        height: '100%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"close\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          onClick: function onClick() {\n            return router.push(\"/win/end\").then(function (r) {});\n          },\n          style: {\n            marginTop: '-10px'\n          },\n          src: close,\n          className: \"closeButton cursor\",\n          alt: \"close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          paddingTop: '100px',\n          marginBottom: '50px'\n        },\n        className: \"flex column    justcenter itemcenter\",\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          name: \"normal_login\",\n          className: \" card-auth column bgwhite  alignitems justcenter flex u-pad-top-l rad8\",\n          size: \"large\",\n          initialValues: {\n            remember: true\n          },\n          onFinish: onSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            style: {\n              textAlign: 'center',\n              fontWeight: 'bolder'\n            },\n            children: \"BRAVO !\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '13px',\n              padding: '20px',\n              textAlign: 'justify'\n            },\n            children: \"Je t'invite \\xE0 passer une demi-journ\\xE9e au poste de secours le plus proche de chez toi. Pour cela remplis ce formulaire.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"u-pad-horizontal-xxl \",\n            children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"name\",\n              label: \"Nom\",\n              rules: [{\n                required: true,\n                message: 'Inserer un nom '\n              }],\n              className: \"u-mar-bottom-m column u-mar-top-s\",\n              children: /*#__PURE__*/_jsxDEV(Input, {\n                className: \"u-mar-top-xs\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"surname\",\n              label: \"Pr\\xE9nom\",\n              className: \"u-mar-bottom-m column u-mar-top-s\",\n              children: /*#__PURE__*/_jsxDEV(Input, {\n                className: \"u-mar-top-xs\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"email\",\n              label: \"email\",\n              rules: [{\n                type: \"email\",\n                required: true,\n                message: 'Inserer une adresse email valide'\n              }],\n              className: \"u-mar-bottom-xs column\",\n              children: /*#__PURE__*/_jsxDEV(Input, {\n                type: \"email\",\n                className: \"u-mar-top-xs\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"check_fill\",\n              children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                checked: checkValue,\n                className: \"fs10 \",\n                onChange: function onChange(e) {\n                  return onChangeChecked(e);\n                },\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    fontSize: '11px'\n                  },\n                  children: \"J'accepte de recevoir un mail de G\\xE9n\\xE9ration Sauveteurs.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 227,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              className: \"w100 justcenter flex itemcenter u-mar-top-l\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  paddingBottom: '20px'\n                },\n                className: \"w100 justcenter flex itemcenter\",\n                children: loading ? /*#__PURE__*/_jsxDEV(Spin, {\n                  indicator: antIcon\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 41\n                }, this) : /*#__PURE__*/_jsxDEV(Button, {\n                  htmlType: \"submit\",\n                  size: \"large\",\n                  style: {\n                    border: 0,\n                    padding: 0\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"img\", (_jsxDEV2 = {\n                    style: {\n                      pointerEvents: checkValue ? 'auto' : 'none'\n                    }\n                  }, _defineProperty(_jsxDEV2, \"style\", {\n                    width: '80px',\n                    height: '50px'\n                  }), _defineProperty(_jsxDEV2, \"src\", ok), _jsxDEV2), void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 241,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Signup, \"UIyHMG+i2O0SacANCmXGUaaPGNw=\", false, function () {\n  return [useAuth, useRouter, Form.useForm];\n});\n\n_c = Signup;\n\nvar _c;\n\n$RefreshReg$(_c, \"Signup\");","map":{"version":3,"sources":["/Users/macbookpro/Projects/web/dipongo_app/pages/win/sendemail.js"],"names":["React","useEffect","useState","Form","Input","Button","Layout","message","Modal","Checkbox","axios","close","ok","URL","Spin","LoadingOutlined","continuer","quitter","useAuth","useRouter","antIcon","fontSize","color","Content","Signup","session","updateSession","deleteSession","router","loading","setLoading","isModalVisible","setIsModalVisible","checkValue","setCheckValue","token","localStorage","getItem","get","headers","then","result","data","running_session","status","question_done","push","r","error","console","log","useForm","form","logout","handleCancel","toggleChecked","onChangeChecked","e","target","checked","onSubmit","values","post","response","warning","request","config","onChecked","height","marginTop","paddingTop","marginBottom","remember","textAlign","fontWeight","padding","required","type","paddingBottom","border","pointerEvents","width"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport {Form, Input, Button, Layout, message, Modal, Checkbox} from 'antd';\nimport axios from \"axios\";\nimport close from \"../../public/assets/img/bouton-quitter.png\";\nimport ok from \"../../public/assets/img/btn-ok-2.png\";\nimport {URL} from '../../urlapi';\nimport { Spin } from 'antd';\nimport { LoadingOutlined } from '@ant-design/icons';\nimport continuer from \"../../public/assets/img/continuer.png\";\nimport quitter from \"../../public/assets/img/quitter.png\";\nimport {useAuth} from \"../../store\";\nimport {useRouter} from \"next/router\";\n\nconst antIcon = <LoadingOutlined style={{ fontSize: 40,color:'#1d893c' }} spin />;\n\n\nconst {  Content } = Layout;\n\nexport default function  Signup () {\n\n    const { session, updateSession, deleteSession } = useAuth();\n    const router = useRouter()\n    const [loading,setLoading] = useState(false)\n    const [isModalVisible, setIsModalVisible] = useState(false);\n\n    const [checkValue, setCheckValue] = useState(false)\n\n    useEffect(() => {\n\n        if (typeof window !== \"undefined\"){\n            setLoading(true)\n            const token = localStorage.getItem(\"token\");\n            axios.get(URL + '/api/user/info', {\n                headers: {\n                    'Authorization': 'Bearer ' + token\n                }\n            }).then((result) =>{\n                setLoading(false)\n                if(result.data.data.running_session.status === true && result.data.data.running_session.question_done === 50){\n\n                }\n                else{\n                    router.push('/roadmap').then((r)=>{})\n                }\n            }).catch((error)=>{\n                setLoading(false)\n                console.log('error')\n            });\n        }\n\n\n    }, []);\n\n\n    const [form] = Form.useForm();\n\n    const logout = () => {\n\n        deleteSession()\n\n    }\n\n    const handleCancel = () => {\n        setIsModalVisible(false)\n    };\n\n\n    const toggleChecked = () => {\n        setCheckValue(!checkValue)\n    };\n\n    const onChangeChecked = e => {\n        setCheckValue(e.target.checked)\n    };\n\n\n\n    async function onSubmit ( values )  {\n\n        if (typeof window !== \"undefined\"){\n            const token = localStorage.getItem(\"token\")\n            setLoading(true)\n            axios.post(URL + '/api/register/email', values,{\n                    headers: {\n                        'Authorization': 'Bearer ' + token\n                    }\n                }\n            ).\n            then((result) =>{\n\n                setLoading(false)\n                router.push(\"/win/end\").then((r)=>{})\n\n                //message.success(result.data.message)\n\n            }).\n            catch(function (error) {\n                setLoading(false)\n                if (error.response) {\n                    setLoading(false)\n                    message.warning(error.response.data.message)\n                    // The request was made and the server responded with a status code\n                    // that falls out of the range of 2xx\n\n                } else if (error.request) {\n                    // The request was made but no response was received\n                    // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n                    // http.ClientRequest in node.js\n                    console.log(error.request)\n                } else {\n                    // Something happened in setting up the request that triggered an Error\n                    console.log('Error', error.message)\n                }\n                console.log(error.config)\n            });\n        }\n\n\n\n    }\n\n    const onChecked = ()=>{\n        setCheckValue((checkValue))\n    }\n\n\n\n    return (\n\n\n        <Layout className=\"bgapp background-image-body\" style={{height: '100vh'}}>\n\n            <Modal closable={false} footer={null} visible={isModalVisible}  onCancel={handleCancel} >\n                <div     className=\"  flex itemcenter justcenter column\" style={{height:'80vh'}}\n                >\n\n\n                    <div  className=\"w100 flex itemcenter justcenter cursor\" onClick={handleCancel} >\n                        <img src={continuer} className=\"w35\"  />\n\n                    </div>\n\n                    <div  className=\"w100 flex itemcenter justcenter cursor\" onClick={logout}>\n                        <img src={quitter} className=\"w25\" style={{marginTop:20}}   />\n\n                    </div>\n\n\n\n\n                </div>\n            </Modal>\n\n\n\n            <section className=\" column flex itemcenter justcenter mask \" style={{height: '100%'}}>\n\n                <div className=\"close\">\n                    <img onClick={()=>router.push(\"/win/end\").then((r)=>{})} style={{marginTop: '-10px'}} src={close} className=\"closeButton cursor\" alt=\"close\" />\n                </div>\n\n\n                <div style={{paddingTop: '100px',marginBottom: '50px'}} className=\"flex column    justcenter itemcenter\" >\n\n                    <Form\n                        name=\"normal_login\"\n                        className=\" card-auth column bgwhite  alignitems justcenter flex u-pad-top-l rad8\"\n                        size=\"large\"\n                        initialValues={{\n                            remember: true,\n                        }}\n                        onFinish={onSubmit}\n                    >\n                        <h1 style={{textAlign: 'center',fontWeight: 'bolder'}}>BRAVO !</h1>\n                        <div style={{fontSize: '13px',padding: '20px',textAlign: 'justify'}}>Je t'invite à passer une demi-journée au poste de secours le plus proche de chez toi. Pour cela remplis ce formulaire.</div>\n\n\n                        <div className=\"u-pad-horizontal-xxl \">\n\n\n\n                            <Form.Item\n                                name=\"name\"\n                                label=\"Nom\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: 'Inserer un nom ',\n                                    },\n                                ]}\n                                className=\"u-mar-bottom-m column u-mar-top-s\"\n                            >\n                                <Input  className=\"u-mar-top-xs\" />\n                            </Form.Item>\n\n\n                            <Form.Item\n                                name=\"surname\"\n                                label=\"Prénom\"\n\n                                className=\"u-mar-bottom-m column u-mar-top-s\"\n                            >\n                                <Input  className=\"u-mar-top-xs\" />\n                            </Form.Item>\n\n\n\n\n                            <Form.Item\n\n                                name=\"email\"\n                                label=\"email\"\n                                rules={[{type:\"email\",required: true,message: 'Inserer une adresse email valide',\n                                },\n                                ]}\n                                className=\"u-mar-bottom-xs column\"\n                            >\n\n                                <Input\n\n                                    type=\"email\"\n                                    className=\"u-mar-top-xs\"\n                                />\n                            </Form.Item>\n                            <Form.Item   name=\"check_fill\">\n                                <Checkbox checked={checkValue} className=\"fs10 \" onChange={(e)=>onChangeChecked(e)} >\n                                    <span style={{fontSize: '11px'}}>J'accepte de recevoir un mail de Génération Sauveteurs.</span>\n                                </Checkbox>\n                            </Form.Item>\n                            <Form.Item className=\"w100 justcenter flex itemcenter u-mar-top-l\">\n                                <div style={{paddingBottom: '20px'}} className=\"w100 justcenter flex itemcenter\">\n\n                                    {loading ?\n\n\n                                        <Spin indicator={antIcon} />\n                                        :\n\n                                        <Button htmlType=\"submit\" size=\"large\" style={{border:0,padding:0}} >\n\n                                            <img style={{pointerEvents: checkValue?'auto':'none'}}  style={{width: '80px',height:'50px'}} src={ok} />\n                                        </Button>\n\n                                    }\n                                </div>\n                            </Form.Item>\n\n\n\n\n\n\n                        </div>\n\n\n\n\n                    </Form>\n\n\n\n                </div>\n\n\n            </section>\n\n\n\n\n\n        </Layout>\n\n\n\n\n\n    );\n\n\n}\n"]},"metadata":{},"sourceType":"module"}