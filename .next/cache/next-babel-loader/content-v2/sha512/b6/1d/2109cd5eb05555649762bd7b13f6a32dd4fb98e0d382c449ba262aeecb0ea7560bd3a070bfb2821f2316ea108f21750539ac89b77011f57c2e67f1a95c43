{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { Layout } from 'antd';\nimport close from \"../public/assets/img/bouton-quitter.png\";\nimport axios from \"axios\";\nimport { URL } from \"../urlapi\";\nimport chrono from '../public/assets/chrono.png';\nimport continuer from '../public/assets/img/continuer.png';\nimport quitter from '../public/assets/img/quitter.png';\nimport visiter from '../public/assets/img/visiter.png';\nimport rejouer from '../public/assets/img/rejouer.png';\nimport julien from \"../public/assets/img/julien.png\";\nimport suivant from \"../public/assets/suivant.jpg\";\nimport Countdown from \"react-countdown\";\nimport { Spin, message, Modal, Progress } from 'antd';\nimport { LoadingOutlined } from '@ant-design/icons';\nimport { useAuth } from \"../store\";\nimport { useRouter } from \"next/router\";\n\nconst antIcon = /*#__PURE__*/_jsx(LoadingOutlined, {\n  style: {\n    fontSize: 40,\n    color: '#1d893c',\n    marginTop: 30\n  },\n  spin: true\n});\n\nconst {\n  Content\n} = Layout;\nexport default function Onboarding() {\n  const {\n    session,\n    updateSession,\n    deleteSession\n  } = useAuth();\n  const router = useRouter();\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: isModalVisible,\n    1: setIsModalVisible\n  } = useState(false);\n  const {\n    0: isClose,\n    1: setIsClose\n  } = useState(false);\n  const {\n    0: isReplay,\n    1: setIsReplay\n  } = useState(false);\n  const {\n    0: showStars,\n    1: setShowStars\n  } = useState(true);\n  const {\n    0: localSession,\n    1: setLocalSession\n  } = useState(null);\n  const {\n    0: isMounted,\n    1: setIsMounted\n  } = useState(false);\n  useEffect(() => {\n    setIsMounted(true);\n  }, []);\n\n  const handleCancel = () => {\n    setIsModalVisible(false);\n    setIsClose(false);\n    setIsReplay(false);\n    setShowStars(true);\n  };\n\n  const logout = () => {\n    deleteSession();\n  };\n\n  async function replayGame() {\n    setLoading(true);\n\n    if (false) {\n      const token = localStorage.getItem(\"token\");\n      axios.get(URL + '/api/start/game', {\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      }).then(result => {\n        updateSession(result.data.data);\n        router.push(\"/roadmap\").then(res => {\n          console.log(res);\n        });\n        setLoading(false);\n      }).catch(error => {\n        setLoading(false);\n\n        if (e.response) {\n          message.warning(e.response.data.message);\n        } else {\n          message.warning('Erreur connexion!');\n        }\n      });\n    }\n  }\n\n  useEffect(() => {\n    if (false) {\n      const audioEl = document.getElementsByClassName(\"audio-element\")[0];\n      audioEl.play();\n      const token = localStorage.getItem(\"token\");\n      axios.get(URL + '/api/user/info', {\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      }).then(result => {\n        if (result.data.data.running_session !== undefined && result.data.data.running_session !== null) {\n          if (result.data.data.running_session.question_done === 50) {\n            router.push('/win').then(res => {\n              console.log(res);\n            });\n          }\n        }\n      }).catch(error => {\n        console.log('lost');\n      });\n    }\n  }, []);\n  const renderer = useCallback(({\n    minutes,\n    seconds,\n    completed\n  }) => {\n    if (completed) {\n      // Render a complete state\n      router.push('/lost').then(res => {\n        console.log(res);\n      }).then(res => {\n        console.log(res);\n      });\n      return null;\n    } else {\n      // Render a countdown\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [minutes < 10 ? '0' : '', \" \", minutes, \":\", seconds < 10 ? '0' : '', seconds]\n      });\n    }\n  }, []);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    style: {\n      width: '100vw',\n      height: '100vh',\n      backgroundColor: '#f4cb6e',\n      position: 'relative'\n    },\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      children: /*#__PURE__*/_jsx(\"audio\", {\n        className: \"audio-element\",\n        children: /*#__PURE__*/_jsx(\"source\", {\n          src: \"../wrong.mp3\"\n        })\n      })\n    }), /*#__PURE__*/_jsx(Modal, {\n      closable: false,\n      footer: null,\n      visible: isReplay,\n      onCancel: handleCancel,\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"  flex itemcenter justcenter column\",\n        style: {\n          height: '80vh'\n        },\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"w100 flex itemcenter justcenter cursor\",\n          onClick: replayGame,\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: rejouer,\n            className: \"w50\",\n            style: {\n              marginTop: 20\n            }\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"w100 flex itemcenter justcenter cursor u-mar-top-xl\",\n          onClick: logout,\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: visiter,\n            className: \"w40\"\n          })\n        })]\n      })\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"lost-image-text w100 u-pad-horizontal-m justcenter\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"flex\",\n        style: {\n          alignItems: 'flex-end',\n          zIndex: 1\n        },\n        children: /*#__PURE__*/_jsx(\"img\", {\n          src: julien,\n          className: \"julien\",\n          style: {\n            display: showStars ? 'block' : 'none'\n          }\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"card-auth card-text-onboard  bgwhite u-pad-s u-pad-left-xl \",\n        children: [/*#__PURE__*/_jsx(\"h1\", {\n          className: \"onboarding-text\",\n          children: \"Le temps est \\xE9coul\\xE9, les premiers baigneurs arrivent et tu n'as pas r\\xE9ussis la formation. Nous devrons faire sans toi. Mais si cela te dit de retenter ta chance je suis partant !\"\n        }), /*#__PURE__*/_jsx(\"span\", {\n          className: \"cursor\",\n          onClick: () => {\n            setIsReplay(true);\n            setShowStars(false);\n          },\n          style: {\n            position: 'absolute',\n            right: -20,\n            bottom: -65\n          },\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: suivant,\n            height: \"85\",\n            width: \"100\"\n          })\n        })]\n      })]\n    }), /*#__PURE__*/_jsx(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n      width: \"100%\",\n      height: \"100%\",\n      version: \"1.1\",\n      viewBox: \"0 0 1280 1024\",\n      children: /*#__PURE__*/_jsxs(\"g\", {\n        children: [/*#__PURE__*/_jsx(\"image\", {\n          width: \"100%\",\n          height: \"100%\",\n          opacity: \"1\",\n          preserveAspectRatio: \"none\",\n          xlinkHref: \"../../map_no_chrono.png\"\n        }), /*#__PURE__*/_jsx(\"path\", {\n          onClick: () => setIsModalVisible(true),\n          className: \"cursor\",\n          fill: \"transparent\",\n          stroke: \"#000\",\n          strokeLinecap: \"butt\",\n          strokeLinejoin: \"miter\",\n          strokeOpacity: \"1\",\n          strokeWidth: \"1\",\n          d: \"M29.52 182.66l1.846-162.365h134.688l1.845 164.21z\",\n          opacity: \"0\"\n        }), /*#__PURE__*/_jsx(\"path\", {\n          fill: \"url(#timer)\",\n          stroke: \"#000\",\n          strokeLinecap: \"butt\",\n          strokeLinejoin: \"miter\",\n          strokeOpacity: \"0\",\n          strokeWidth: \"1\",\n          d: \"M1105.182 876.396v36.901h105.168l-3.69-40.59z\",\n          opacity: \"1\"\n        }), /*#__PURE__*/_jsx(\"path\", {\n          onClick: () => setIsClose(true),\n          className: \"cursor\",\n          fill: \"transparent\",\n          stroke: \"#000\",\n          strokeLinecap: \"butt\",\n          strokeLinejoin: \"miter\",\n          strokeOpacity: \"1\",\n          strokeWidth: \"1\",\n          d: \"M1095.957 27.676c5.535 118.083 5.535 119.928 5.535 119.928l86.717 9.225 70.112-18.45-12.916-118.084z\",\n          opacity: \"0\"\n        }), /*#__PURE__*/_jsx(\"image\", {\n          style: {\n            display: showStars ? 'block' : 'none'\n          },\n          className: \"cursor\",\n          width: \"142.431\",\n          height: \"139.331\",\n          x: \"291.935\",\n          y: \"751.147\",\n          preserveAspectRatio: \"none\",\n          xlinkHref: \"../../vide.png\"\n        }), /*#__PURE__*/_jsx(\"image\", {\n          style: {\n            display: showStars ? 'block' : 'none'\n          },\n          className: \"cursor\",\n          width: \"142.431\",\n          height: \"139.331\",\n          x: \"931.935\",\n          y: \"471.711\",\n          preserveAspectRatio: \"none\",\n          xlinkHref: \"../../vide.png\"\n        }), /*#__PURE__*/_jsx(\"image\", {\n          style: {\n            display: showStars ? 'block' : 'none'\n          },\n          className: \"cursor\",\n          width: \"142.431\",\n          height: \"139.331\",\n          x: \"416.329\",\n          y: \"246.359\",\n          preserveAspectRatio: \"none\",\n          xlinkHref: \"../../vide.png\"\n        }), /*#__PURE__*/_jsx(\"image\", {\n          style: {\n            display: showStars ? 'block' : 'none'\n          },\n          width: \"142.431\",\n          height: \"139.331\",\n          x: \"769.681\",\n          y: \"93.119\",\n          opacity: \"1\",\n          preserveAspectRatio: \"none\",\n          xlinkHref: \"../../vide.png\"\n        })]\n      })\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}