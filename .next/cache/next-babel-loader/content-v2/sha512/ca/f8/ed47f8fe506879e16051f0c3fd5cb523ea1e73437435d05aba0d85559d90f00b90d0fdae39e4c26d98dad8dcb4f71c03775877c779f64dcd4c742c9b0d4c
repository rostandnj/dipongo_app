{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useEffect, useState } from 'react';\nimport { Layout, Modal } from 'antd';\nimport close from \"./../../public/assets/img/bouton-quitter.png\";\nimport axios from \"axios\";\nimport { URL } from \"../../urlapi\";\nimport parti from \"./../../public/assets/img/parti.png\";\nimport ok from \"./../../public/assets/img/bouton-ok.png\";\nimport julien from \"./../../public/assets/img/julien.png\";\nimport suivant from \"./../../public/assets/suivant.jpg\";\nimport quitter from \"./../../public/assets/img/quitter.png\";\nimport continuer from \"./../../public/assets/img/continuer.png\";\nimport { Spin, message } from 'antd';\nimport { LoadingOutlined } from '@ant-design/icons';\nimport Link from 'next/link';\nimport EmptyData from \"../../components/EmptyData\";\nimport backBtn from \"../../public/assets/btn_back_onboard.png\";\nimport { useAuth } from \"../../store\";\nimport { useRouter } from \"next/router\";\n\nvar antIcon = /*#__PURE__*/_jsx(LoadingOutlined, {\n  style: {\n    fontSize: 40,\n    color: '#1d893c',\n    marginTop: 30\n  },\n  spin: true\n});\n\nvar Content = Layout.Content;\nexport default function Onboarding() {\n  var _useAuth = useAuth(),\n      session = _useAuth.session,\n      updateSession = _useAuth.updateSession,\n      deleteSession = _useAuth.deleteSession;\n\n  var router = useRouter();\n\n  var _useState = useState(false),\n      isModalVisible = _useState[0],\n      setIsModalVisible = _useState[1];\n\n  var _useState2 = useState(false),\n      isGoingModal = _useState2[0],\n      setIsGoingModal = _useState2[1];\n\n  var _useState3 = useState(false),\n      hideJulien = _useState3[0],\n      setHideJulien = _useState3[1];\n\n  var _useState4 = useState(false),\n      isChrono = _useState4[0],\n      setIsChrono = _useState4[1];\n\n  var _useState5 = useState(false),\n      hideClose = _useState5[0],\n      setHideClose = _useState5[1];\n\n  var _useState6 = useState(false),\n      isMounted = _useState6[0],\n      setIsMounted = _useState6[1];\n\n  var handleCancel = function handleCancel() {\n    setIsModalVisible(false);\n    setIsGoingModal(false);\n    setHideJulien(false);\n    setIsChrono(false);\n    setHideClose(false);\n  };\n\n  var logout = function logout() {\n    deleteSession();\n  };\n\n  var token = null;\n  var user = null;\n\n  var _useState7 = useState(\"Si tu réussis la mission en 50 min ou moins tu pourras vivre une expérience inédite. Je ne t'en dis pas plus nous sommes pressés. C'est parti !\"),\n      textOnboard = _useState7[0],\n      setTextOnboard = _useState7[1];\n\n  var _useState8 = useState(false),\n      loading = _useState8[0],\n      setLoading = _useState8[1];\n\n  var showGoing = function showGoing() {\n    setHideJulien(true);\n    setIsGoingModal(true);\n  };\n\n  var showChrono = function showChrono() {\n    setHideJulien(true);\n    setIsGoingModal(false);\n    setIsModalVisible(false);\n    setHideClose(true);\n    setIsChrono(true);\n  };\n\n  useEffect(function () {\n    setIsMounted(true);\n  }, []);\n\n  var startGame = function startGame() {\n    if (true) {\n      var _token = localStorage.getItem(\"token\");\n\n      setLoading(true);\n      axios.get(URL + '/api/start/game', {\n        headers: {\n          'Authorization': 'Bearer ' + _token\n        }\n      }).then(function (result) {\n        updateSession(result.data.data);\n\n        if (isMounted) {\n          router.push(\"/roadmap\");\n          setLoading(false);\n        } //\n\n      })[\"catch\"](function (error) {\n        setLoading(false);\n\n        if (error.response) {\n          message.warning(error.response.data.message);\n        } else if (error.request) {\n          console.log(error.request);\n        } else {\n          console.log('Error', error);\n        }\n      });\n    }\n  };\n\n  if (session) {\n    return /*#__PURE__*/_jsx(Layout, {\n      className: \"bgapp onboard-layout  background-image-body\",\n      children: /*#__PURE__*/_jsxs(\"section\", {\n        className: \"hv100 column onboard-page flex itemcenter justcenter\",\n        children: [/*#__PURE__*/_jsx(Modal, {\n          closable: false,\n          footer: null,\n          visible: isModalVisible,\n          onCancel: handleCancel,\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"  flex itemcenter justcenter column\",\n            style: {\n              height: '70vh'\n            },\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"w100 flex itemcenter justcenter cursor \",\n              onClick: handleCancel,\n              children: /*#__PURE__*/_jsx(\"img\", {\n                src: continuer,\n                className: \"registerButton\"\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"w100 flex itemcenter justcenter cursor \",\n              onClick: logout,\n              children: /*#__PURE__*/_jsx(\"img\", {\n                src: quitter,\n                className: \"w30\",\n                style: {\n                  marginTop: 20\n                }\n              })\n            })]\n          })\n        }), /*#__PURE__*/_jsx(Modal, {\n          closable: false,\n          footer: null,\n          visible: isGoingModal,\n          onCancel: handleCancel,\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"  flex itemcenter justcenter column\",\n            style: {\n              height: '70vh'\n            },\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"w100 flex itemcenter justcenter cursor \",\n              onClick: function onClick() {\n                return showChrono();\n              },\n              children: /*#__PURE__*/_jsx(\"img\", {\n                src: parti,\n                className: \"registerButton\"\n              })\n            })\n          })\n        }), /*#__PURE__*/_jsx(Modal, {\n          closable: false,\n          footer: null,\n          visible: isChrono,\n          onCancel: handleCancel,\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"  flex itemcenter justcenter column\",\n            style: {\n              height: '70vh'\n            },\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"card-auth hauto  bgwhite itemcenter u-pad-l flex column \",\n              children: loading ? /*#__PURE__*/_jsxs(_Fragment, {\n                children: [/*#__PURE__*/_jsx(Spin, {\n                  indicator: antIcon\n                }), /*#__PURE__*/_jsx(\"span\", {\n                  children: \" Chargement des donn\\xE9es du jeu !\"\n                })]\n              }) : /*#__PURE__*/_jsxs(_Fragment, {\n                children: [/*#__PURE__*/_jsx(\"span\", {\n                  className: \"center fs16\",\n                  children: \"Clique sur les lieux pour r\\xE9pondre \\xE0 toutes les questions et collectionner les bou\\xE9es tubes.\"\n                }), /*#__PURE__*/_jsxs(\"span\", {\n                  className: \"av-heavy u-mar-top-s center fs20\",\n                  children: [\"C'est parti,\", /*#__PURE__*/_jsx(\"br\", {}), \"tu as 50 minutes top chrono !\"]\n                }), /*#__PURE__*/_jsx(\"span\", {\n                  style: {\n                    pointerEvents: loading ? 'none' : 'auto'\n                  },\n                  className: \"u-mar-top-s cursor\",\n                  children: /*#__PURE__*/_jsx(\"img\", {\n                    onClick: function onClick() {\n                      return startGame();\n                    },\n                    className: \"btn-ok cursor\",\n                    src: ok\n                  })\n                })]\n              })\n            })\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"close cursor\",\n          onClick: function onClick() {\n            return setIsModalVisible(true);\n          },\n          style: {\n            display: hideClose ? 'none' : 'block'\n          },\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: close,\n            className: \"closeButton\",\n            alt: \"close\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"back-btn-onboard cursor\",\n          style: {\n            display: hideClose ? 'none' : 'block'\n          },\n          children: /*#__PURE__*/_jsx(Link, {\n            href: '/onboard/step-5',\n            children: /*#__PURE__*/_jsx(\"img\", {\n              src: backBtn,\n              className: \"back-onboard\",\n              alt: \"close\"\n            })\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \" h100 w100 justcenter\",\n          style: {\n            paddingRight: '4px',\n            alignItems: 'flex-end',\n            display: hideJulien ? 'none' : 'flex'\n          },\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"flex\",\n            style: {\n              alignItems: 'flex-end',\n              zIndex: 1\n            },\n            children: /*#__PURE__*/_jsx(\"img\", {\n              src: julien,\n              className: \"julien\"\n            })\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"onboard-div card-auth hauto w100 bgwhite \",\n            style: {\n              position: 'relative',\n              marginBottom: 70\n            },\n            children: [/*#__PURE__*/_jsx(\"span\", {\n              className: \"onboarding-text\",\n              children: textOnboard\n            }), /*#__PURE__*/_jsx(\"span\", {\n              onClick: function onClick() {\n                return showGoing();\n              },\n              className: \"cursor\",\n              style: {\n                position: 'absolute',\n                right: -20,\n                bottom: -65\n              },\n              children: /*#__PURE__*/_jsx(\"img\", {\n                src: suivant,\n                height: \"85\",\n                width: \"100\"\n              })\n            })]\n          })]\n        })]\n      })\n    });\n  } else {\n    return /*#__PURE__*/_jsx(EmptyData, {});\n  }\n}","map":null,"metadata":{},"sourceType":"module"}