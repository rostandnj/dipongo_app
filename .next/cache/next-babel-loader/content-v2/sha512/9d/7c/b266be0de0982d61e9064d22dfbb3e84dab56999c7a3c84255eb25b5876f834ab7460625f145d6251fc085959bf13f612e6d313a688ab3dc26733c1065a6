{"ast":null,"code":"import _regeneratorRuntime from \"/Users/macbookpro/Projects/web/dipongo_app/node_modules/@babel/runtime/regenerator\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _asyncToGenerator from \"/Users/macbookpro/Projects/web/dipongo_app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState } from 'react';\nimport { Layout, Modal } from 'antd';\nimport close from \"./../../public/assets/img/bouton-quitter.png\";\nimport { useHistory } from \"react-router\";\nimport axios from \"axios\";\nimport { URL } from \"./../../urlapi\";\nimport Background from \"./../../public/assets/img/onboarding1.png\";\nimport Background1 from \"./../../public/assets/img/bg2.png\";\nimport Background2 from \"./../../public/assets/img/bg3.png\";\nimport Background2_boue from \"./../../public/assets/img/bg3_bouee.png\";\nimport Background3 from \"./../../public/assets/img/road-map_vide.png\";\nimport parti from \"./../../public/assets/img/parti.png\";\nimport ok from \"./../../public/assets/img/bouton-ok.png\";\nimport julien from \"./../../public/assets/img/julien.png\";\nimport suivant from \"./../../public/assets/suivant.jpg\";\nimport { Spin, message } from 'antd';\nimport { LoadingOutlined } from '@ant-design/icons';\nimport quitter from \"./../../public/assets/img/quitter.png\";\nimport continuer from \"./../../public/assets/img/continuer.png\";\nimport Link from 'next/link';\n\nvar antIcon = /*#__PURE__*/_jsx(LoadingOutlined, {\n  style: {\n    fontSize: 40,\n    color: '#1d893c',\n    marginTop: 30\n  },\n  spin: true\n});\n\nvar Content = Layout.Content;\nexport default function Onboarding() {\n  var _user;\n\n  var history = useHistory();\n\n  var _useState = useState(false),\n      isModalVisible = _useState[0],\n      setIsModalVisible = _useState[1];\n\n  var handleCancel = function handleCancel() {\n    setIsModalVisible(false);\n  };\n\n  var logout = function logout() {\n    deleteSession();\n  };\n\n  var token = null;\n  var user = null;\n\n  if (true) {\n    var tokenTab = JSON.parse(localStorage.getItem('user'));\n\n    if (tokenTab !== null) {\n      token = tokenTab.token;\n    }\n\n    user = JSON.parse(localStorage.getItem('user'));\n  }\n\n  var _useState2 = useState(\"Bienvenue \" + ((_user = user) === null || _user === void 0 ? void 0 : _user.name) + \", Je suis Julien le chef du poste de secours. Surveiller les plages et sauver des vies c'est mon métier !\"),\n      textOnboard = _useState2[0],\n      setTextOnboard = _useState2[1];\n\n  var _useState3 = useState(2),\n      step = _useState3[0],\n      setStep = _useState3[1];\n\n  var _useState4 = useState(false),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  function startGame() {\n    return _startGame.apply(this, arguments);\n  }\n\n  function _startGame() {\n    _startGame = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              setLoading(true);\n              _context.next = 4;\n              return axios.get(URL + '/api/start/game', {\n                headers: {\n                  'Authorization': 'Bearer ' + token\n                }\n              });\n\n            case 4:\n              result = _context.sent;\n              history.push(\"/roadmap\");\n              setLoading(false);\n              _context.next = 13;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](0);\n              setLoading(false);\n\n              if (_context.t0.response) {\n                message.warning(_context.t0.response.data.message);\n              } else {\n                message.warning('Erreur connexion!');\n              }\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 9]]);\n    }));\n    return _startGame.apply(this, arguments);\n  }\n\n  var nextStep = function nextStep() {\n    setStep(step + 1);\n\n    switch (step) {\n      case 2:\n        return setTextOnboard('La saison de surveillance des plages commence dans quelques heures et nous avons un problème. Il nous manque un sauveteur de qualité pour compléter notre équipe');\n\n      case 3:\n        return setTextOnboard(\"Viens nous rejoindre dans l'équipe, tu vas découvrir un métier passionnant. Allez en route je n'ai que 50 min pour te former, tu devras être attentif.\");\n\n      case 4:\n        return setTextOnboard(\" Voici notre jolie plage.Pour bien la protéger tu dois la connaitre parfaitement. Pour cela je vais te faire découvrir 4  lieux.\");\n\n      case 5:\n        return setTextOnboard(\"Dans chacun d'eux tu devras récolter un maximum de bouées tubes pour valider le lieux. Pour gagner des bouées tubes tu devras répondre à mes questions et relever mes défis.\");\n\n      case 6:\n        return setTextOnboard(\"Si tu réussis la mission en 50 min ou moins tu pourras vivre une expérience inédite. Je ne t'en dis pas plus nous sommes pressés. C'est parti !\");\n\n      default:\n        return;\n    }\n  };\n\n  return /*#__PURE__*/_jsx(Layout, {\n    className: \"bgapp onboard-layout\",\n    style: {\n      backgroundImage: \"url(\".concat(step == 2 ? Background : step == 3 ? Background1 : step == 4 ? Background1 : step == 5 ? Background2 : step == 6 ? Background2_boue : Background3, \")\"),\n      backgroundSize: 'cover'\n    },\n    children: /*#__PURE__*/_jsxs(\"section\", {\n      className: \"hv100 column onboard-page flex itemcenter justcenter\" + (step == 8 ? ' mask' : ''),\n      children: [/*#__PURE__*/_jsx(Modal, {\n        closable: false,\n        footer: null,\n        visible: isModalVisible,\n        onCancel: handleCancel,\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"  flex itemcenter justcenter column\",\n          style: {\n            height: '80vh'\n          },\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"w100 flex itemcenter justcenter cursor\",\n            onClick: handleCancel,\n            children: /*#__PURE__*/_jsx(\"img\", {\n              src: continuer,\n              className: \"w35\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"w100 flex itemcenter justcenter cursor\",\n            onClick: logout,\n            children: /*#__PURE__*/_jsx(\"img\", {\n              src: quitter,\n              className: \"w25\",\n              style: {\n                marginTop: 20\n              }\n            })\n          })]\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"close cursor\",\n        onClick: function onClick() {\n          return setIsModalVisible(true);\n        },\n        children: /*#__PURE__*/_jsx(\"img\", {\n          src: close,\n          className: \"closeButton\",\n          alt: \"close\"\n        })\n      }), step != 8 && step != 9 && /*#__PURE__*/_jsxs(\"div\", {\n        className: \"flex h100 w100 u-pad-horizontal-m justcenter\",\n        style: {\n          alignItems: 'flex-end'\n        },\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"flex\",\n          style: {\n            alignItems: 'flex-end',\n            zIndex: 1\n          },\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: julien,\n            className: \"julien\"\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \" card-auth hauto w100 bgwhite u-pad-s u-pad-left-xl u-pad-vertical-l\",\n          style: {\n            marginLeft: -80,\n            position: 'relative',\n            marginBottom: 70,\n            minHeight: 200\n          },\n          children: [/*#__PURE__*/_jsx(\"span\", {\n            className: \"onboarding-text\",\n            children: textOnboard\n          }), /*#__PURE__*/_jsx(\"span\", {\n            className: \"cursor\",\n            onClick: nextStep,\n            style: {\n              position: 'absolute',\n              right: 15,\n              bottom: 15\n            },\n            children: /*#__PURE__*/_jsx(\"img\", {\n              src: suivant,\n              height: \"35\",\n              width: \"50\"\n            })\n          })]\n        })]\n      }), step == 8 && /*#__PURE__*/_jsx(\"span\", {\n        onClick: function onClick() {\n          return setStep(9);\n        },\n        children: /*#__PURE__*/_jsx(\"img\", {\n          className: \"cursor\",\n          src: parti\n        })\n      }), step == 9 && /*#__PURE__*/_jsx(\"div\", {\n        className: \"card-auth hauto w40 bgwhite itemcenter u-pad-l flex column \",\n        children: loading ? /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsx(Spin, {\n            indicator: antIcon\n          }), /*#__PURE__*/_jsx(\"span\", {\n            children: \" Chargement des donn\\xE9es du jeu !\"\n          })]\n        }) : /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsx(\"span\", {\n            className: \"center fs22\",\n            children: \"Clique sur les lieux pour r\\xE9pondre \\xE0 toutes les questions et collectionner les bou\\xE9es tubes.\"\n          }), /*#__PURE__*/_jsxs(\"span\", {\n            className: \"av-heavy u-mar-top-s center fs22\",\n            children: [\"C'est parti,\", /*#__PURE__*/_jsx(\"br\", {}), \"tu as 50 minutes top chrono !\"]\n          }), /*#__PURE__*/_jsx(\"span\", {\n            style: {\n              pointerEvents: loading ? 'none' : 'auto'\n            },\n            className: \"u-mar-top-s cursor\",\n            onClick: startGame,\n            children: /*#__PURE__*/_jsx(\"img\", {\n              src: ok\n            })\n          })]\n        })\n      })]\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}