{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState } from 'react';\nimport { Layout, Modal } from 'antd';\nimport close from \"./../../public/assets/img/bouton-quitter.png\";\nimport { useHistory } from \"react-router\";\nimport axios from \"axios\";\nimport { URL } from \"./../../urlapi\";\nimport Background from \"./../../public/assets/img/onboarding1.png\";\nimport Background1 from \"./../../public/assets/img/bg2.png\";\nimport Background2 from \"./../../public/assets/img/bg3.png\";\nimport Background2_boue from \"./../../public/assets/img/bg3_bouee.png\";\nimport Background3 from \"./../../public/assets/img/road-map_vide.png\";\nimport parti from \"./../../public/assets/img/parti.png\";\nimport ok from \"./../../public/assets/img/bouton-ok.png\";\nimport julien from \"./../../public/assets/img/julien.png\";\nimport suivant from \"./../../public/assets/suivant.jpg\";\nimport { Spin, message } from 'antd';\nimport { LoadingOutlined } from '@ant-design/icons';\nimport quitter from \"./../../public/assets/img/quitter.png\";\nimport continuer from \"./../../public/assets/img/continuer.png\";\nimport Link from 'next/link';\n\nconst antIcon = /*#__PURE__*/_jsx(LoadingOutlined, {\n  style: {\n    fontSize: 40,\n    color: '#1d893c',\n    marginTop: 30\n  },\n  spin: true\n});\n\nconst {\n  Content\n} = Layout;\nexport default function Onboarding() {\n  var _user;\n\n  const history = useHistory();\n  const {\n    0: isModalVisible,\n    1: setIsModalVisible\n  } = useState(false);\n\n  const handleCancel = () => {\n    setIsModalVisible(false);\n  };\n\n  const logout = () => {\n    deleteSession();\n  };\n\n  let token = null;\n  let user = null;\n\n  if (false) {\n    let tokenTab = JSON.parse(localStorage.getItem('user'));\n\n    if (tokenTab !== null) {\n      token = tokenTab.token;\n    }\n\n    user = JSON.parse(localStorage.getItem('user'));\n  }\n\n  const {\n    0: textOnboard,\n    1: setTextOnboard\n  } = useState(\"Bienvenue \" + ((_user = user) === null || _user === void 0 ? void 0 : _user.name) + \", Je suis Julien le chef du poste de secours. Surveiller les plages et sauver des vies c'est mon métier !\");\n  const {\n    0: step,\n    1: setStep\n  } = useState(2);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n\n  async function startGame() {\n    try {\n      setLoading(true);\n      const result = await axios.get(URL + '/api/start/game', {\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      });\n      history.push(\"/roadmap\");\n      setLoading(false);\n    } catch (e) {\n      setLoading(false);\n\n      if (e.response) {\n        message.warning(e.response.data.message);\n      } else {\n        message.warning('Erreur connexion!');\n      }\n    }\n  }\n\n  const nextStep = () => {\n    setStep(step + 1);\n\n    switch (step) {\n      case 2:\n        return setTextOnboard('La saison de surveillance des plages commence dans quelques heures et nous avons un problème. Il nous manque un sauveteur de qualité pour compléter notre équipe');\n\n      case 3:\n        return setTextOnboard(\"Viens nous rejoindre dans l'équipe, tu vas découvrir un métier passionnant. Allez en route je n'ai que 50 min pour te former, tu devras être attentif.\");\n\n      case 4:\n        return setTextOnboard(\" Voici notre jolie plage.Pour bien la protéger tu dois la connaitre parfaitement. Pour cela je vais te faire découvrir 4  lieux.\");\n\n      case 5:\n        return setTextOnboard(\"Dans chacun d'eux tu devras récolter un maximum de bouées tubes pour valider le lieux. Pour gagner des bouées tubes tu devras répondre à mes questions et relever mes défis.\");\n\n      case 6:\n        return setTextOnboard(\"Si tu réussis la mission en 50 min ou moins tu pourras vivre une expérience inédite. Je ne t'en dis pas plus nous sommes pressés. C'est parti !\");\n\n      default:\n        return;\n    }\n  };\n\n  return /*#__PURE__*/_jsx(Layout, {\n    className: \"bgapp onboard-layout\",\n    style: {\n      backgroundImage: `url(${step == 2 ? Background : step == 3 ? Background1 : step == 4 ? Background1 : step == 5 ? Background2 : step == 6 ? Background2_boue : Background3})`,\n      backgroundSize: 'cover'\n    },\n    children: /*#__PURE__*/_jsxs(\"section\", {\n      className: \"hv100 column onboard-page flex itemcenter justcenter\" + (step == 8 ? ' mask' : ''),\n      children: [/*#__PURE__*/_jsx(Modal, {\n        closable: false,\n        footer: null,\n        visible: isModalVisible,\n        onCancel: handleCancel,\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"  flex itemcenter justcenter column\",\n          style: {\n            height: '80vh'\n          },\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"w100 flex itemcenter justcenter cursor\",\n            onClick: handleCancel,\n            children: /*#__PURE__*/_jsx(\"img\", {\n              src: continuer,\n              className: \"w35\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"w100 flex itemcenter justcenter cursor\",\n            onClick: logout,\n            children: /*#__PURE__*/_jsx(\"img\", {\n              src: quitter,\n              className: \"w25\",\n              style: {\n                marginTop: 20\n              }\n            })\n          })]\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"close cursor\",\n        onClick: () => setIsModalVisible(true),\n        children: /*#__PURE__*/_jsx(\"img\", {\n          src: close,\n          className: \"closeButton\",\n          alt: \"close\"\n        })\n      }), step != 8 && step != 9 && /*#__PURE__*/_jsxs(\"div\", {\n        className: \"flex h100 w100 u-pad-horizontal-m justcenter\",\n        style: {\n          alignItems: 'flex-end'\n        },\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"flex\",\n          style: {\n            alignItems: 'flex-end',\n            zIndex: 1\n          },\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: julien,\n            className: \"julien\"\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \" card-auth hauto w100 bgwhite u-pad-s u-pad-left-xl u-pad-vertical-l\",\n          style: {\n            marginLeft: -80,\n            position: 'relative',\n            marginBottom: 70,\n            minHeight: 200\n          },\n          children: [/*#__PURE__*/_jsx(\"span\", {\n            className: \"onboarding-text\",\n            children: textOnboard\n          }), /*#__PURE__*/_jsx(\"span\", {\n            className: \"cursor\",\n            onClick: nextStep,\n            style: {\n              position: 'absolute',\n              right: 15,\n              bottom: 15\n            },\n            children: /*#__PURE__*/_jsx(\"img\", {\n              src: suivant,\n              height: \"35\",\n              width: \"50\"\n            })\n          })]\n        })]\n      }), step == 8 && /*#__PURE__*/_jsx(\"span\", {\n        onClick: () => setStep(9),\n        children: /*#__PURE__*/_jsx(\"img\", {\n          className: \"cursor\",\n          src: parti\n        })\n      }), step == 9 && /*#__PURE__*/_jsx(\"div\", {\n        className: \"card-auth hauto w40 bgwhite itemcenter u-pad-l flex column \",\n        children: loading ? /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsx(Spin, {\n            indicator: antIcon\n          }), /*#__PURE__*/_jsx(\"span\", {\n            children: \" Chargement des donn\\xE9es du jeu !\"\n          })]\n        }) : /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsx(\"span\", {\n            className: \"center fs22\",\n            children: \"Clique sur les lieux pour r\\xE9pondre \\xE0 toutes les questions et collectionner les bou\\xE9es tubes.\"\n          }), /*#__PURE__*/_jsxs(\"span\", {\n            className: \"av-heavy u-mar-top-s center fs22\",\n            children: [\"C'est parti,\", /*#__PURE__*/_jsx(\"br\", {}), \"tu as 50 minutes top chrono !\"]\n          }), /*#__PURE__*/_jsx(\"span\", {\n            style: {\n              pointerEvents: loading ? 'none' : 'auto'\n            },\n            className: \"u-mar-top-s cursor\",\n            onClick: startGame,\n            children: /*#__PURE__*/_jsx(\"img\", {\n              src: ok\n            })\n          })]\n        })\n      })]\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}